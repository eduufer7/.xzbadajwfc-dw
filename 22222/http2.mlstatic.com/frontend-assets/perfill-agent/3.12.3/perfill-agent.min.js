var perfill=function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}const n=()=>"undefined"!=typeof window,r=()=>"fetch"in window,o=()=>"navigator"in window;var i={supportsEnvironment:n,supportsNavigatorApi:o,supportsPerformanceApi:()=>"performance"in window,supportsBeaconOrFetch:()=>o()&&"sendBeacon"in window.navigator||r(),supportsFetchApi:r,supportsMatchMediaApi:()=>n()&&void 0!==window.matchMedia,supportsPreloadState:()=>n()&&"__PRELOADED_STATE__"in window,supportsWeakSet:()=>"WeakSet"in window,supportsLocalStorageApi:()=>"localStorage"in window};const a={},s={};var c={subscribe:(e,t)=>{s[e]=s[e]||[],s[e].push(t),(a[e]||[]).map((e=>t(e))),delete a[e]},queue:(e,t)=>{const n=s[e]||[];n.forEach((e=>e(t))),n.length||(a[e]=a[e]||[],a[e].push(t))}},l={CLIENT_COOKIES:"client-cookies",WEB_VITALS:"web-vitals",RESOURCE_TIMING:"resource-timing",PAGE_RENDER:"page-render",A11Y:"a11y",AVAILABILITY:"availability",CDN_HEALTH:"cdn-health",TRAFFIC_HEALTH:"traffic-health",SESSION_REPLAY:"session-replay"},d={endpoint:"https://events.mercadolibre.com/v2/perf-metric",deviceInfoMetrics:["ram-size","cpu-cores"],connectionInfoMetrics:["network-type","network-speed","user-agent","save-data","rtt"],clientInfo:["name","version"],tags:["platform","site","application","device","webview","scope"],browserInfoMetrics:["d2id","url","dark-mode"]},u=d,h=d;var p={arrayOperator:e=>e.reduce(((e,t)=>e.concat(t)),[]),objectOperator:e=>Object.keys(e).reduce(((t,n)=>{const r=e[n],o="object"!=typeof r||Array.isArray(r)||null===r?{[n]:r}:r;return Object.assign(t,o)}),{})};const m=d,{objectOperator:f}=p;var g=f([m,{thresholdEntries:{img:25e4,script:17e4,style:5e4},fileSupport:{img:["apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","png","svg","webp"],script:["js"],style:["css"]}}]),v=d;const y=d,{objectOperator:I}=p;var C=I([y,{endpoint:"https://events.mercadolibre.com/dom"}]);const S=d,{objectOperator:E}=p,T=1e6;var b=E([S,{endpoint:e=>`https://events.mercadolibre.com/v0/media-storage-service/session-replay-store-${e}/assets`,RRWEB_EVENT_TYPES:{DomContentLoaded:0,Load:1,FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Custom:5},MAX_PAYLOAD_SIZE:T,PAYLOAD_SIZE:999e3,MAX_MLDATA_WAITING_TIME:3e3,CHUNKS_EXPIRATION_TIME:24e4,MAX_CHUNKS_SIZE:50,MAX_FLUSH_TIME:3e4}]);const w=d,{objectOperator:A}=p;var N=A([w,{metricSupport:["css","img","link","script","other"]}]);var M=(e={},t=[])=>t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{}),D={AVAILABILITY_FAILURE:"failure",AVAILABILITY_TRANSFER_SIZE:"transfersize",AVAILABILITY_BROWSER_ERRORS:"errors-js",BROWSER:"browser",WINDOW_DOM:"window-dom",D2ID:"d2id",NETWORK_TYPE:"network-type",NETWORK_SPEED:"network-speed",USER_AGENT:"user-agent",RAM_SIZE:"ram-size",CPU_CORES:"cpu-cores",WINDOW_WIDTH:"window-width",WINDOW_HEIGHT:"window-height",LCP:"lcp",CLS:"cls",FCP:"fcp",FID:"fid",TBT:"tbt",INP:"inp",TTFB:"time-to-first-byte",DNS_LOOKUP_TIME:"dns-lookup-time",DOWNLOAD_TIME:"download-time",FETCH_TIME:"fetch-time",HEADER_SIZE:"header-size",TOTAL_TIME:"total-time",WORKER_TIME:"worker-time",HYDRATE_COMPLETE:"hydrate-complete",HYDRATE_DURATION:"hydrate-duration",REDIRECT_COUNT:"redirect-count",DOM_COMPLETE:"dom-complete",DOM_INTERACTIVE:"dom-interactive",DOM_CONTENT_LOADED_END:"dom-content-loaded-end",DOM_CONTENT_LOADED_START:"dom-content-loaded-start",DOM_CONTENT_LOADED:"dom-content-loaded",ONLOAD:"onload",ONLOAD_END:"onload-end",ONLOAD_START:"onload-start",REQUEST_START:"request-start",RESPONSE_START:"response-start",RESPONSE_END:"response-end",RESPONSE_TIME:"response-time",NAVIGATION_TYPE:"navigation-type",NAVIGATION_TIMING:"navigationtiming",INITIAL_CONTENT_SIZE:"initial-content-size",DARK_MODE:"dark-mode",REDUCED_MOTION:"reduced-motion",REDUCED_COLOR:"reduced-contrast",URL:"url",X_CDN:"cdn",DURATION_SUM:"duration-sum",RESOURCE_SIZE:"resources-size",RESOURCE_FAILURE:"resources-failure",RESOURCE_SUCCESS:"resources-success",DEBUG_TARGET_LCP:"debug-target-lcp",DEBUG_TARGET_FID:"debug-target-fid",DEBUG_TARGET_CLS:"debug-target-cls",DEBUG_TARGET_INP:"debug-target-inp",RESOURCE_TIMING:"resourceTiming",SESSION_REPLAY:"session-replay",SESSION_REPLAY_CTX:"session-replay-ctx",SESSION_REPLAY_START:"start-recording",SESSION_REPLAY_STOP:"stop-recording",TRACEABILITY_ID:"traceability-id",APP_NAME:"application",SCOPE_NAME:"scope",DEVICE:"device",PLATFORM_ID:"platform",SITE_ID:"site",WEBVIEW:"webview",SESSION_ID:"session-id",MLDATA_SESSION_ID:"_mldataSessionId",REQUEST_ID:"requestId",VIEW_NAME:"view-name",CUSTOM_ATTRIBUTES:"custom-attributes",USER_ID:"user-id",CONTEXT_ID:"context-id"};const O=M,{WEB_VITALS:R}=l,{FCP:k,LCP:_,FID:x,CLS:L,TBT:F,INP:B,DNS_LOOKUP_TIME:P,DOWNLOAD_TIME:U,FETCH_TIME:W,HEADER_SIZE:V,TTFB:G,TOTAL_TIME:j,WORKER_TIME:Y,REDIRECT_COUNT:Z,DOM_COMPLETE:H,DOM_INTERACTIVE:K,DOM_CONTENT_LOADED_END:z,DOM_CONTENT_LOADED_START:J,DOM_CONTENT_LOADED:X,ONLOAD_END:Q,ONLOAD_START:q,ONLOAD:$,REQUEST_START:ee,RESPONSE_START:te,RESPONSE_END:ne,RESPONSE_TIME:re,NAVIGATION_TYPE:oe,INITIAL_CONTENT_SIZE:ie,REDUCED_MOTION:ae,REDUCED_COLOR:se,DEBUG_TARGET_LCP:ce,DEBUG_TARGET_CLS:le,DEBUG_TARGET_FID:de,DEBUG_TARGET_INP:ue}=D,he=[k,_,x,L,F,B,P,U,W,V,G,j,Y,Z,H,K,z,J,X,Q,q,$,ee,te,ne,re,oe,ie,ae,se,ce,le,de,ue],pe=[k,_,L];"undefined"!=typeof window&&"PerformanceEventTiming"in window&&"interactionId"in window.PerformanceEventTiming.prototype&&pe.push(B);var me=(e,t)=>{const n=O(t,he);if(!Object.keys(n).length)throw new Error("Metrics not found");const r=Object.keys(n);if(!pe.every((e=>-1!==r.indexOf(e))))throw new Error("Metrics missing");return{name:R,data:n}};const{RESOURCE_TIMING:fe}=l;var ge=(e,t)=>t&&t.resources&&t.resources.length?{name:fe,data:t}:null;const ve=M,{PAGE_RENDER:ye}=l,{HYDRATE_COMPLETE:Ie,HYDRATE_DURATION:Ce}=D,Se=[Ie,Ce];var Ee=(e,t)=>{const n=ve(t,Se);if(!Object.keys(n).length)throw new Error("Metrics not found");return{name:ye,data:n}};var Te=(e,t)=>e.reduce(((e,t)=>e.replace(new RegExp(t.original,"g"),t.translated)),t);const{WEB_VITALS:be,PAGE_RENDER:we,A11Y:Ae,AVAILABILITY:Ne,CDN_HEALTH:Me}=l,De=u,Oe=h,Re=C,ke=g,_e=v,xe=d,{REQUEST_ID:Le}=D,{objectOperator:Fe}=p,Be={[be]:De,[we]:Oe,[Ae]:Re,[Ne]:ke,[Me]:_e,commons:xe};var Pe={prepareConfiguration:e=>{const{platform:t,site:n,device:r,application:o,initiatives:i,scope:a,webview:s}=e,c=e[Le];if(!Array.isArray(i))return null;if(t&&n&&r&&o&&i){const e={platform:t,site:n,device:r,application:o,webview:s,initiatives:i.map((e=>Fe({i:e,sent:!1})))};return c&&(e[Le]=c),a&&(e.scope=a),e}return null},getConfiguration:(e,t="commons",n=null)=>e in Be[t]?Be[t][e]:n};const Ue=M,We=Te,{objectOperator:Ve}=p,{getConfiguration:Ge}=Pe,je="commons",Ye=/^([a-zA-Z]+)-(iOS|Android|AndroidNoPS|SmartPOS)?(?:\/|%2F)((?:\d+\.){2}\d+)/,Ze=[{original:"SmartPOS",translated:"Android"},{original:"AndroidNoPS",translated:"Android"}],He=(e,t=je)=>({tags:Ue(e,Ge("tags",t,[]))}),Ke=(e,t)=>{const n=Ue(t,["device","webview"]),r=n.webview&&"mobile"===n.device||!1,o=e["user-agent"]||"",i=Ye.exec(o),a=i?We(Ze,i[2]).toLowerCase():null;if(n.webview&&!a)throw new Error("Unknown device native type");return`${r?"webview":"web"}/${r?a:n.device}`};var ze={prepareTags:He,prepareEventTags:(e,t,n=je)=>{const{tags:r}=He(t,n);return{tags:Ve({tags:r,device:Ke(e,t)})}},prepareDeviceInfo:(e,t=je)=>({"device-info":Ue(e,Ge("deviceInfoMetrics",t,[]))}),prepareClientInfo:()=>({"client-info":{name:"perfill-agent",version:"3.12.3"}}),prepareConnectionInfo:(e,t=je)=>({"connection-info":Ue(e,Ge("connectionInfoMetrics",t,[]))}),prepareBrowserInfo:(e,t=je)=>({"browser-info":Ue(e,Ge("browserInfoMetrics",t,[]))}),prepareDeviceType:Ke};const Je=M,{A11Y:Xe}=l,{WINDOW_DOM:Qe,WINDOW_WIDTH:qe,WINDOW_HEIGHT:$e}=D,{deviceInfoMetrics:et,connectionInfoMetrics:tt,browserInfoMetrics:nt}=C,{prepareEventTags:rt,prepareClientInfo:ot}=ze,{arrayOperator:it,objectOperator:at}=p,st=[Qe,qe,$e];var ct=(e,t)=>{const{name:n,version:r}=ot()["client-info"],{tags:o}=rt(t,e,Xe),i=Je(t,it([et,tt,nt,st]));if(!Object.keys(i).length)throw new Error("Metrics not found");const a=at({metricsCollected:i,tags:o,client_name:n,client_version:r}),s=[];return Object.keys(a).forEach((e=>{if("window-dom"!==e)s.push([e.replace("-","_"),a[e]]);else{const e=new Blob([a["window-dom"]],{type:"text/html"});s.push(["file",e,"dom.html"])}})),{name:Xe,data:s}};const lt=M,{AVAILABILITY:dt}=l,{AVAILABILITY_FAILURE:ut,AVAILABILITY_TRANSFER_SIZE:ht,AVAILABILITY_BROWSER_ERRORS:pt}=D,mt=[ut,ht,pt];var ft=(e,t)=>{const n=lt(t,mt);if(!Object.keys(n).length)throw new Error("Metrics not found");return{name:dt,data:{[ut]:n[ut],[ht]:n[ht],[pt]:n[pt]}}};const gt=M,{objectOperator:vt}=p,{CDN_HEALTH:yt}=l,{DURATION_SUM:It,RESOURCE_SIZE:Ct,RESOURCE_FAILURE:St,RESOURCE_SUCCESS:Et,X_CDN:Tt,AVAILABILITY_FAILURE:bt}=D,wt=[Tt,Ct,It],At=[Tt];const Nt=me,Mt=ge,Dt=Ee,Ot=ct,Rt=ft,kt=(e,t)=>{const n=gt(t,wt);if(!Object.keys(n).length)throw new Error("Metrics not found");const r=Object.keys(n);if(!At.every((e=>-1!==r.indexOf(e))))throw new Error("Metrics missing");const o=(t[bt]||[]).length,i=n[Ct]-o;return{name:yt,data:vt({collection:n,[St]:o,[Et]:i})}},{WEB_VITALS:_t,PAGE_RENDER:xt,A11Y:Lt,AVAILABILITY:Ft,CDN_HEALTH:Bt,RESOURCE_TIMING:Pt}=l,{objectOperator:Ut}=p,{prepareEventTags:Wt,prepareDeviceInfo:Vt,prepareConnectionInfo:Gt,prepareClientInfo:jt,prepareBrowserInfo:Yt}=ze,Zt={[_t]:{builder:Nt},[Pt]:{builder:Mt},[xt]:{builder:Dt},[Lt]:{builder:Ot},[Ft]:{builder:Rt},[Bt]:{builder:kt}},Ht=(e,t,n)=>{const{builder:r}=(e=>{if(e.id in Zt)return Zt[e.id];throw new Error("Initiative not found")})(e);return r(t,n)};var Kt={preparePayload:(e,t,n)=>{const r=((e,t,n)=>{try{const r=Ht(e,t,n),o=Wt(n,t);return{"event-info":Ut({initiativePayload:r,tags:o})}}catch(e){return null}})(e,t,n);if(!r)return null;const o=jt(),i=Vt(n),a=Gt(n),s=Yt(n);return Ut({clientInfo:o,eventInfo:r,deviceInfo:i,connectionInfo:a,browserInfo:s})},prepareFormData:(e,t,n)=>{try{const{data:r}=Ht(e,t,n),o=new FormData;return r.forEach((e=>{const[t,n,r]=e;r?o.append(t,n,r):o.append(t,n)})),o}catch(e){return null}}};const zt=(e,t,n=!0)=>{window.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"application/json"},keepalive:n}).then((e=>e.text())).catch((e=>e))};var Jt={beaconWithFetchFallback:(e,t)=>{const n=JSON.stringify(t);window.navigator&&window.navigator.sendBeacon&&window.navigator.sendBeacon(e,n)||zt(e,n)},sendWithFetch:zt,sendFormDataWithFetch:(e,t,n=!0)=>{window.fetch(e,{method:"POST",body:t,keepalive:n}).then((e=>e.text())).catch((e=>e))},getWithFetch:(e,t={})=>window.fetch(e,t)};const{endpoint:Xt}=u,{endpoint:Qt}=h,{endpoint:qt}=g,{endpoint:$t}=v,{endpoint:en}=C,{endpoint:tn}=b,{endpoint:nn}=N,{preparePayload:rn,prepareFormData:on}=Kt,{beaconWithFetchFallback:an,sendFormDataWithFetch:sn}=Jt,{WEB_VITALS:cn,PAGE_RENDER:ln,A11Y:dn,AVAILABILITY:un,CDN_HEALTH:hn,RESOURCE_TIMING:pn,SESSION_REPLAY:mn}=l,fn={},gn={[cn]:Xt,[ln]:Qt,[dn]:en,[un]:qt,[hn]:$t,[pn]:nn,[mn]:tn},vn=e=>void 0!==fn[e];var yn={trackMetric:(e,t)=>{fn[e]=t},appendMetric:(e,t)=>{(fn[e]=fn[e]||[]).push(t)},getMetricsCollected:()=>fn,sendMetrics:(e,t,n)=>{const r=rn(e,t,n);return!!r&&(an(gn[e.id],r),!0)},sendFormData:(e,t,n)=>{const r=on(e,t,n);return!!r&&(sn(gn[e.id],r,!1),!0)},clearMetric:e=>{vn(e)&&delete fn[e]},checkMetric:vn,getMetric:(e,t=null)=>vn(e)?fn[e]:t};const{trackMetric:In}=yn,{supportsNavigatorApi:Cn}=i,{RAM_SIZE:Sn}=D;var En=()=>{Cn()&&(window.navigator.deviceMemory&&In(Sn,`${window.navigator.deviceMemory}`),window.navigator.hardwareConcurrency&&In("cpu-cores",`${window.navigator.hardwareConcurrency}`))};const{trackMetric:Tn}=yn,{supportsNavigatorApi:bn}=i,{NETWORK_SPEED:wn,NETWORK_TYPE:An,USER_AGENT:Nn}=D;var Mn=()=>{if(!bn())return;const{navigator:e}=window;e.connection&&(e.connection.effectiveType&&Tn(An,e.connection.effectiveType),e.connection.downlink&&Tn(wn,`${e.connection.downlink}`),"saveData"in e.connection&&Tn("save-data",e.connection.saveData),e.connection.rtt&&Tn("rtt",`${e.connection.rtt}`)),e.userAgent&&Tn(Nn,e.userAgent)};var Dn={toFixedNumber:(e,t=6)=>Number.isNaN(e)||!e||Number.isInteger(e)||"string"==typeof e?e:parseFloat(e.toFixed(t)),truncateDecimals:(e,t=2)=>Number.isNaN(e)||!e||"string"==typeof e||Number.isNaN(t)||"string"==typeof t?e:Math.trunc(e*10**t)/10**t,BIGQUERY_MAX_DECIMALS:6};const{trackMetric:On}=yn,{supportsPerformanceApi:Rn}=i,{toFixedNumber:kn}=Dn,{REDIRECT_COUNT:_n,DOM_COMPLETE:xn,DOM_INTERACTIVE:Ln,DOM_CONTENT_LOADED_END:Fn,DOM_CONTENT_LOADED_START:Bn,DOM_CONTENT_LOADED:Pn,ONLOAD_END:Un,ONLOAD_START:Wn,ONLOAD:Vn,REQUEST_START:Gn,RESPONSE_START:jn,RESPONSE_END:Yn,RESPONSE_TIME:Zn,NAVIGATION_TYPE:Hn}=D;var Kn,zn,Jn,Xn,Qn,qn=()=>{if(!Rn())return;const[e]=window.performance.getEntriesByType("navigation");if(e){const{domComplete:t,domContentLoadedEventEnd:n,domContentLoadedEventStart:r,domInteractive:o,loadEventEnd:i,loadEventStart:a,redirectCount:s,requestStart:c,responseStart:l,responseEnd:d,type:u}=e;s&&On(_n,s),t&&On(xn,kn(t)),o&&On(Ln,kn(o)),n&&On(Fn,kn(n)),r&&On(Bn,kn(r)),r&&n&&On(Pn,kn(n-r)),i&&On(Un,kn(i)),a&&On(Wn,kn(a)),a&&i&&On(Vn,kn(i-a)),c&&On(Gn,kn(c)),l&&On(jn,kn(l)),d&&On(Yn,kn(d)),l&&d&&On(Zn,kn(d-l)),u&&On(Hn,u)}},$n={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{}},er=window,tr=er.console,nr=er.navigator,rr=er.performance,or=function(){return nr.deviceMemory},ir=function(){return nr.hardwareConcurrency},ar=function(){return rr&&!!rr.getEntriesByType&&!!rr.now&&!!rr.mark},sr="4g",cr=!1,lr={},dr={value:0},ur={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},hr={value:0},pr={value:0},mr={},fr={isHidden:!1,didChange:!1},gr=function(){fr.isHidden=!1,document.hidden&&(fr.isHidden=document.hidden,fr.didChange=!0)},vr=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){tr.warn("Perfume.js:",e)}return null},yr=function(){return!!(ir()&&ir()<=4)||!!(or()&&or()<=4)},Ir=function(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return yr()||t}},Cr=function(e){return parseFloat(e.toFixed(4))},Sr=function(e){return"number"!=typeof e?null:Cr(e/Math.pow(1024,2))},Er=function(e,t,n,r,o){var i,a=function(){$n.analyticsTracker&&(fr.isHidden&&!["CLS","INP"].includes(e)||$n.analyticsTracker({attribution:r,metricName:e,data:t,navigatorInformation:nr?{deviceMemory:or()||0,hardwareConcurrency:ir()||0,serviceWorkerStatus:"serviceWorker"in nr?nr.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:yr(),isLowEndExperience:Ir(sr,cr)}:{},rating:n,navigationType:o}))};["CLS","INP"].includes(e)?a():(i=a,"requestIdleCallback"in er?er.requestIdleCallback(i,{timeout:3e3}):i())},Tr=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<dr.value)){var t=e.duration-50;t>0&&(hr.value+=t,pr.value+=t)}}))},br={RT:[100,200],TBT:[200,600],NTBT:[200,600]},wr=function(e,t){return br[e]?t<=br[e][0]?"good":t<=br[e][1]?"needsImprovement":"poor":null},Ar=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=Cr(t[e]))})),Er(e,t,null,n||{})},Nr=function(e){var t=e.attribution,n=e.name,r=e.rating,o=e.value,i=e.navigationType;"FCP"===n&&(dr.value=o),["FCP","LCP"].includes(n)&&!mr[0]&&(mr[0]=vr("longtask",Tr)),"FID"===n&&setTimeout((function(){fr.didChange||(Nr({attribution:t,name:"TBT",rating:wr("TBT",hr.value),value:hr.value,navigationType:i}),Ar("dataConsumption",ur.value))}),1e4);var a=Cr(o);a<=$n.maxTime&&a>=0&&Er(n,a,r,t,i)},Mr=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Dr=function(e){if("loading"===document.readyState)return"loading";var t=Mr();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},Or=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},Rr=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,o=r.id?"#"+r.id:Or(r)+(r.className&&r.className.length?"."+r.className.replace(/\s+/g,"."):"");if(n.length+o.length>(t||100)-1)return n||o;if(n=n?o+">"+n:o,r.id)break;e=r.parentNode}}catch(e){}return n},kr=-1,_r=function(){return kr},xr=function(e){addEventListener("pageshow",(function(t){t.persisted&&(kr=t.timeStamp,e(t))}),!0)},Lr=function(){var e=Mr();return e&&e.activationStart||0},Fr=function(e,t){var n=Mr(),r="navigate";return _r()>=0?r="back-forward-cache":n&&(r=document.prerendering||Lr()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Br=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Pr=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Ur=function(e,t,n,r){var o,i;return function(a){t.value>=0&&(a||r)&&((i=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Wr=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Vr=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Gr=-1,jr=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Yr=function(e){"hidden"===document.visibilityState&&Gr>-1&&(Gr="visibilitychange"===e.type?e.timeStamp:0,Hr())},Zr=function(){addEventListener("visibilitychange",Yr,!0),addEventListener("prerenderingchange",Yr,!0)},Hr=function(){removeEventListener("visibilitychange",Yr,!0),removeEventListener("prerenderingchange",Yr,!0)},Kr=function(){return Gr<0&&(Gr=jr(),Zr(),xr((function(){setTimeout((function(){Gr=jr(),Zr()}),0)}))),{get firstHiddenTime(){return Gr}}},zr=function(e,t){t=t||{},Vr((function(){var n,r=[1800,3e3],o=Kr(),i=Fr("FCP"),a=Br("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<o.firstHiddenTime&&(i.value=Math.max(e.startTime-Lr(),0),i.entries.push(e),n(!0)))}))}));a&&(n=Ur(e,i,r,t.reportAllChanges),xr((function(o){i=Fr("FCP"),n=Ur(e,i,r,t.reportAllChanges),Wr((function(){i.value=performance.now()-o.timeStamp,n(!0)}))})))}))},Jr={passive:!0,capture:!0},Xr=new Date,Qr=function(e,t){Kn||(Kn=t,zn=e,Jn=new Date,eo(removeEventListener),qr())},qr=function(){if(zn>=0&&zn<Jn-Xr){var e={entryType:"first-input",name:Kn.type,target:Kn.target,cancelable:Kn.cancelable,startTime:Kn.timeStamp,processingStart:Kn.timeStamp+zn};Xn.forEach((function(t){t(e)})),Xn=[]}},$r=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){Qr(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,Jr),removeEventListener("pointercancel",r,Jr)};addEventListener("pointerup",n,Jr),addEventListener("pointercancel",r,Jr)}(t,e):Qr(t,e)}},eo=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,$r,Jr)}))},to=0,no=1/0,ro=0,oo=function(e){e.forEach((function(e){e.interactionId&&(no=Math.min(no,e.interactionId),ro=Math.max(ro,e.interactionId),to=ro?(ro-no)/7+1:0)}))},io=function(){return Qn?to:performance.interactionCount||0},ao=0,so=function(){return io()-ao},co=[],lo={},uo=function(e){var t=co[co.length-1],n=lo[e.interactionId];if(n||co.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};lo[r.id]=r,co.push(r)}co.sort((function(e,t){return t.latency-e.latency})),co.splice(10).forEach((function(e){delete lo[e.id]}))}},ho=function(e,t){!function(e,t){t=t||{},Vr((function(){var n=[200,500];"interactionCount"in performance||Qn||(Qn=Br("event",oo,{type:"event",buffered:!0,durationThreshold:0}));var r,o=Fr("INP"),i=function(e){e.forEach((function(e){e.interactionId&&uo(e),"first-input"===e.entryType&&!co.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&uo(e)}));var t,n=(t=Math.min(co.length-1,Math.floor(so()/50)),co[t]);n&&n.latency!==o.value&&(o.value=n.latency,o.entries=n.entries,r())},a=Br("event",i,{durationThreshold:t.durationThreshold||40});r=Ur(e,o,n,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),Pr((function(){i(a.takeRecords()),o.value<0&&so()>0&&(o.value=0,o.entries=[]),r(!0)})),xr((function(){co=[],ao=io(),o=Fr("INP"),r=Ur(e,o,n,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0];e.attribution={eventTarget:Rr(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:Dr(t.startTime)}}else e.attribution={}}(t),e(t)}),t)},po={},mo=function e(t){document.prerendering?Vr((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},fo=function(e,t){t=t||{};var n=[800,1800],r=Fr("TTFB"),o=Ur(e,r,n,t.reportAllChanges);mo((function(){var i=Mr();if(i){var a=i.responseStart;if(a<=0||a>performance.now())return;r.value=Math.max(a-Lr(),0),r.entries=[i],o(!0),xr((function(){r=Fr("TTFB",0),(o=Ur(e,r,n,t.reportAllChanges))(!0)}))}}))},go=function(e){e.forEach((function(e){e.identifier&&Nr({attribution:{identifier:e.identifier},name:"ET",rating:null,value:e.startTime})}))},vo=function(e){e.forEach((function(e){if($n.isResourceTiming&&Ar("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;ur.value[e.initiatorType]+=t,ur.value.total+=t}}))},yo=function(){!function(e,t){fo((function(e){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,r=Math.max(t.domainLookupStart-n,0),o=Math.max(t.connectStart-n,0),i=Math.max(t.requestStart-n,0);e.attribution={waitingTime:r,dnsTime:o-r,connectionTime:i-o,requestTime:e.value-i,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(e),function(e){e.value=e.value-e.entries[0].requestStart,Nr(e)}(e)}),t)}(0,$n.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},Vr((function(){var n,r=[.1,.25],o=Fr("CLS"),i=-1,a=0,s=[],c=function(t){i>-1&&e(t)},l=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=s[0],r=s[s.length-1];a&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(a+=e.value,s.push(e)):(a=e.value,s=[e]),a>o.value&&(o.value=a,o.entries=s,n())}}))},d=Br("layout-shift",l);d&&(n=Ur(c,o,r,t.reportAllChanges),zr((function(e){i=e.value,o.value<0&&(o.value=0,n())})),Pr((function(){l(d.takeRecords()),n(!0)})),xr((function(){a=0,i=-1,o=Fr("CLS",0),n=Ur(c,o,r,t.reportAllChanges),Wr((function(){return n()}))})))}))}((function(e){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(r=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||r[0];if(n)return void(e.attribution={largestShiftTarget:Rr(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:Dr(t.startTime)})}}var r;e.attribution={}}(e),function(e){Nr(e)}(e)}),t)}(0,$n.reportOptions.cls),function(e,t){zr((function(e){!function(e){if(e.entries.length){var t=Mr(),n=e.entries[e.entries.length-1];if(t){var r=t.activationStart||0,o=Math.max(0,t.responseStart-r);return void(e.attribution={timeToFirstByte:o,firstByteToFCP:e.value-o,loadState:Dr(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:Dr(_r())}}(e),function(e){Nr(e)}(e)}),t)}(0,$n.reportOptions.fcp),function(e,t){!function(e,t){t=t||{},Vr((function(){var n,r=[100,300],o=Kr(),i=Fr("FID"),a=function(e){e.startTime<o.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},s=function(e){e.forEach(a)},c=Br("first-input",s);n=Ur(e,i,r,t.reportAllChanges),c&&Pr((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&xr((function(){var o;i=Fr("FID"),n=Ur(e,i,r,t.reportAllChanges),Xn=[],zn=-1,Kn=null,eo(addEventListener),o=a,Xn.push(o),qr()}))}))}((function(e){!function(e){var t=e.entries[0];e.attribution={eventTarget:Rr(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:Dr(t.startTime)}}(e),function(e){Nr(e)}(e)}),t)}(0,$n.reportOptions.fid),function(e,t){!function(e,t){t=t||{},Vr((function(){var n,r=[2500,4e3],o=Kr(),i=Fr("LCP"),a=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-Lr(),0);r<o.firstHiddenTime&&(i.value=r,i.entries=[t],n())}},s=Br("largest-contentful-paint",a);if(s){n=Ur(e,i,r,t.reportAllChanges);var c=function(){po[i.id]||(a(s.takeRecords()),s.disconnect(),po[i.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),Pr(c,!0),xr((function(o){i=Fr("LCP"),n=Ur(e,i,r,t.reportAllChanges),Wr((function(){i.value=performance.now()-o.timeStamp,po[i.id]=!0,n(!0)}))}))}}))}((function(e){!function(e){if(e.entries.length){var t=Mr();if(t){var n=t.activationStart||0,r=e.entries[e.entries.length-1],o=r.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===r.url}))[0],i=Math.max(0,t.responseStart-n),a=Math.max(i,o?(o.requestStart||o.startTime)-n:0),s=Math.max(a,o?o.responseEnd-n:0),c=Math.max(s,r?r.startTime-n:0),l={element:Rr(r.element),timeToFirstByte:i,resourceLoadDelay:a-i,resourceLoadTime:s-a,elementRenderDelay:c-s,navigationEntry:t,lcpEntry:r};return r.url&&(l.url=r.url),o&&(l.lcpResourceEntry=o),void(e.attribution=l)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(e),function(e){Nr(e)}(e)}),t)}(0,$n.reportOptions.lcp),ho((function(e){return Nr(e)}),$n.reportOptions.inp),$n.isResourceTiming&&vr("resource",vo),$n.isElementTiming&&vr("element",go)},Io=function(e){var t="usageDetails"in e?e.usageDetails:{};Ar("storageEstimate",{quota:Sr(e.quota),usage:Sr(e.usage),caches:Sr(t.caches),indexedDB:Sr(t.indexedDB),serviceWorker:Sr(t.serviceWorkerRegistrations)})},Co=0,So=function(){function e(e){if(void 0===e&&(e={}),this.v="8.3.0",$n.analyticsTracker=e.analyticsTracker,$n.isResourceTiming=!!e.resourceTiming,$n.isElementTiming=!!e.elementTiming,$n.maxTime=e.maxMeasureTime||$n.maxTime,$n.reportOptions=e.reportOptions||$n.reportOptions,ar()){"PerformanceObserver"in er&&yo(),void 0!==document.hidden&&document.addEventListener("visibilitychange",gr);var t=function(){if(!ar())return{};var e=rr.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();Ar("navigationTiming",t),t.redirectTime&&Nr({attribution:{},name:"RT",rating:wr("RT",t.redirectTime),value:t.redirectTime}),Ar("networkInformation",function(){if("connection"in nr){var e=nr.connection;return"object"!=typeof e?{}:(sr=e.effectiveType,cr=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),nr&&nr.storage&&"function"==typeof nr.storage.estimate&&nr.storage.estimate().then(Io)}}return e.prototype.start=function(e){ar()&&!lr[e]&&(lr[e]=!0,rr.mark("mark_".concat(e,"_start")))},e.prototype.end=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),ar()&&lr[e]){rr.mark("mark_".concat(e,"_end")),delete lr[e];var r=function(e){rr.measure(e,"mark_".concat(e,"_start"),"mark_".concat(e,"_end"));var t=rr.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t.duration:-1}(e);n&&Ar(e,Cr(r),t)}},e.prototype.endPaint=function(e,t){var n=this;setTimeout((function(){n.end(e,t)}))},e.prototype.clear=function(e){delete lr[e],rr.clearMarks&&(rr.clearMarks("mark_".concat(e,"_start")),rr.clearMarks("mark_".concat(e,"_end")))},e.prototype.markNTBT=function(){var e=this;this.start("ntbt"),pr.value=0,clearTimeout(Co),Co=setTimeout((function(){e.end("ntbt",{},!1),Nr({attribution:{},name:"NTBT",rating:wr("NTBT",pr.value),value:pr.value}),pr.value=0}),2e3)},e}(),Eo=t(Object.freeze({__proto__:null,default:So}));const To=Eo,{trackMetric:bo,sendMetrics:wo,getMetricsCollected:Ao}=yn,{LCP:No,CLS:Mo,FID:Do,INP:Oo,WORKER_TIME:Ro,TOTAL_TIME:ko,TTFB:_o,HEADER_SIZE:xo,FETCH_TIME:Lo,DOWNLOAD_TIME:Fo,DNS_LOOKUP_TIME:Bo,DEBUG_TARGET_LCP:Po,DEBUG_TARGET_CLS:Uo,DEBUG_TARGET_FID:Wo,DEBUG_TARGET_INP:Vo,NAVIGATION_TIMING:Go}=D;const{trackMetric:jo}=yn,{supportsEnvironment:Yo,supportsMatchMediaApi:Zo}=i,{D2ID:Ho,DARK_MODE:Ko,REDUCED_MOTION:zo,REDUCED_COLOR:Jo,URL:Xo}=D,Qo=/(?:_d2id=)([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})/;var qo=()=>{const e=function(e){if(!e)return null;const t=e.match(Qo);return t?t[1]:t}("undefined"!=typeof document&&document.cookie);if(e&&jo(Ho,`${e}`),Yo()&&jo(Xo,`${window.location.origin}${window.location.pathname}`),Zo()){jo(Ko,window.matchMedia("(prefers-color-scheme: dark)").matches);const e=!0===window.matchMedia("(prefers-reduced-motion: reduce)").matches||!0===window.matchMedia("(prefers-reduced-motion: reduce)").matches;jo(zo,e);const t=!0===window.matchMedia("(prefers-contrast: custom), (prefers-contrast: less), (prefers-contrast: more)").matches||!0===window.matchMedia("(forced-colors: active)").matches;jo(Jo,t)}};const{trackMetric:$o}=yn,{supportsPreloadState:ei,supportsWeakSet:ti}=i,{INITIAL_CONTENT_SIZE:ni}=D;var ri=()=>{try{if(ei()&&ti()){const e=JSON.stringify(window.__PRELOADED_STATE__,(()=>{const e=new WeakSet;return(t,n)=>{if("object"==typeof n&&null!==n){if(e.has(n))return;e.add(n)}return n}})());$o(ni,e.length)}}catch(e){}};const oi=En,ii=Mn,ai=qn,si=(e,t)=>{let n=!1;return new To({analyticsTracker:r=>{if(n)return;const{attribution:o,metricName:i,data:a}=r,s="string"==typeof i?i.toLowerCase():i;s===No&&o&&bo(Po,o.element),s===Mo&&o&&bo(Uo,o.largestShiftTarget),s===Do&&o&&bo(Wo,o.eventTarget),s===Oo&&o&&bo(Vo,o.eventTarget),s===Go&&a&&"object"==typeof a&&(bo(Bo,a.dnsLookupTime),bo(Fo,a.downloadTime),bo(Lo,a.fetchTime),bo(xo,a.headerSize),bo(_o,a.timeToFirstByte),bo(ko,a.totalTime),bo(Ro,a.workerTime)),bo(s,a),n=wo(t,e,Ao())}})},{prepareConfiguration:ci}=Pe,li=qo,di=ri,{supportsPerformanceApi:ui,supportsBeaconOrFetch:hi}=i;var pi={start:(e,t)=>{const n=ci(e);if(n)try{ui()&&hi()&&(si(n,t),oi(),ii(),li(),ai(),di())}catch(e){}}};const mi=Eo,{RESOURCE_TIMING:fi}=D,{metricSupport:gi}=N,{appendMetric:vi}=yn,{truncateDecimals:yi}=Dn;const{RESOURCE_TIMING:Ii}=l,{RESOURCE_TIMING:Ci}=D,{sendMetrics:Si,getMetricsCollected:Ei}=yn,Ti=window.requestIdleCallback||(e=>setTimeout(e,200)),bi="resourceTimingEvent";let wi=!1;const Ai=e=>{(e=>{const t=async()=>{if("hidden"===window.document.visibilityState){const n=Ei()[Ci];Si({id:Ii},e,{resources:n}),window.document.removeEventListener(bi,t),wi=!1}};wi||(window.document.addEventListener(bi,t),wi=!0),window.document.addEventListener("visibilitychange",(()=>{const e=new window.Event(bi);window.document.dispatchEvent(e)}))})(e)};var Ni=e=>{Ti((()=>Ai(e)))};const Mi=()=>new mi({resourceTiming:!0,analyticsTracker:({metricName:e,data:t})=>{if(e===fi&&gi.includes(t.initiatorType)){const e=JSON.parse(JSON.stringify(t));Object.keys(e).forEach((t=>{"number"==typeof e[t]&&(e[t]=yi(e[t]))})),vi(fi,e)}}}),Di=Ni,{prepareConfiguration:Oi}=Pe,{supportsPerformanceApi:Ri,supportsBeaconOrFetch:ki}=i;var _i={start:e=>{const t=Oi(e);if(t)try{Ri()&&ki()&&(Mi(),Di(t))}catch(e){}}};var xi={commands:{SET_COOKIE:"set-cookie"},endpoint:"https://events.mercadolibre.com/v2/client-cookies"};const{CLIENT_COOKIES:Li}=l,{commands:Fi,endpoint:Bi}=xi,{subscribe:Pi}=c,{beaconWithFetchFallback:Ui}=Jt,{objectOperator:Wi}=p,{prepareClientInfo:Vi,prepareTags:Gi}=ze;let ji=[];const Yi=e=>{if(1!==e.length||!e[0])throw new Error;return e[0]},Zi={path:Yi,domain:Yi,expires:Yi,samesite:Yi,"max-age":e=>{const t=parseInt(Yi(e),10);if(Number.isNaN(t))throw new Error;return t},secure:e=>{if(e.length)throw new Error;return!0}},Hi=(e,t)=>{e["unknown-metadata"]=`${e["unknown-metadata"]?`${e["unknown-metadata"]};`:""}${t}`},Ki=window.requestIdleCallback||(e=>setTimeout(e,200));let zi=!1;const Ji={[Fi.SET_COOKIE]:(e,t,n)=>{const r=((e,t=null)=>{if(!e)return null;const n=e.split(";").reduce(((e,t,n)=>{const r=t.trim();if(!r)return e;const o=r.split("=").map((e=>e.trim())),i=o[0];if(!n)return i&&2===o.length&&(e.name=i),e;const a=i.toLowerCase(),s=Zi[a];if(s)try{e[a]=s(o.slice(1))}catch(n){Hi(e,t)}else Hi(e,t);return e}),{name:null,path:null,domain:null,"max-age":null,expires:null,samesite:null,secure:null,"unknown-metadata":null,"user-preferences":t});return n.name?n:null})(e,n);r&&(ji.push(r),(e=>{const t=()=>{if("hidden"===window.document.visibilityState){const n=Vi(),r=Gi(e);Ui(Bi,Wi({clientInfo:n,tags:r,cookies:ji})),ji=[],window.document.removeEventListener("visibilitychange",t),zi=!1}};zi||(window.document.addEventListener("visibilitychange",t),zi=!0)})(t))}};var Xi=e=>{Pi(Li,(t=>{t&&Ji[t.type]&&Ki((()=>Ji[t.type](t.data,e,t.userPreferences)))}))};const Qi=Xi,{supportsBeaconOrFetch:qi}=i;var $i={start:e=>{try{qi()&&Qi(e)}catch(e){}}};const{PAGE_RENDER:ea}=l,{trackMetric:ta,sendMetrics:na,getMetricsCollected:ra}=yn,{subscribe:oa}=c,ia=window.requestIdleCallback||(e=>setTimeout(e,200)),aa="pageRenderEvent";let sa=!1;const ca=(e,t)=>{e.forEach((e=>{ta(e.metric,e.value)})),(e=>{const t=()=>{"hidden"===window.document.visibilityState&&(na({id:ea},e,ra()),window.document.removeEventListener(aa,t),sa=!1)};sa||(window.document.addEventListener(aa,t),sa=!0),window.document.addEventListener("visibilitychange",(()=>{const e=new window.Event(aa);window.document.dispatchEvent(e)}))})(t)};var la=e=>{oa(ea,(t=>{t&&ia((()=>ca(t,e)))}))};const da=la,ua=En,ha=Mn,{prepareConfiguration:pa}=Pe,ma=qo,{supportsBeaconOrFetch:fa}=i;var ga={start:e=>{const t=pa(e);if(t)try{fa()&&(ua(),ha(),da(t),ma())}catch(e){}}};const{arrayOperator:va}=p,ya=Te,Ia=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],Ca={STYLE:!0,IFRAME:!0,SCRIPT:!0,svg:!0,path:!0},Sa={"data-hj-suppress":!0,"data-hj-suppressed":!0,"data-hj-masked":!0,"data-pii-mask":!0,"nav-header-username":!0},Ea={address:!0,address1:!0,address2:!0,addressline1:!0,addressline2:!0,cell:!0,cellphone:!0,dateofbirth:!0,dob:!0,email:!0,familyname:!0,firstname:!0,fullname:!0,lastname:!0,firstName:!0,fullName:!0,lastName:!0,phone:!0,postalcode:!0,postcode:!0,surname:!0,tel:!0,telephone:!0,username:!0,zip:!0,zipcode:!0,nationalinsurancenumber:!0,nin:!0,ppsn:!0,security:!0,securitynum:!0,socialsec:!0,socialsecuritynumber:!0,socsec:!0,ssn:!0,authpw:!0,contrasena:!0,contrasenya:!0,pass:!0,passord:!0,password:!0,passwort:!0,pw:!0,pwd:!0,pword:!0,pwrd:!0,sapwd:!0,senha:!0,userpw:!0,userpwd:!0,cc:!0,cccsc:!0,cccvc:!0,cccvv:!0,ccexp:!0,ccexpiry:!0,ccexpmonth:!0,ccexpyear:!0,ccname:!0,ccnum:!0,ccnumber:!0,cctype:!0,creditcard:!0,csc:!0,cvc:!0,cvv:!0,exp:!0,accountnum:!0,accountnumber:!0,bic:!0,iban:!0,ibanaccountnum:!0,ibanaccountnumber:!0,pin:!0,pinnum:!0,secq:!0,secret:!0,secretq:!0,secretquestion:!0,securityq:!0,securityquestion:!0,sortcode:!0,swift:!0,buyerEmail:!0,nickname:!0,buyerFullName:!0,buyerPhone:!0,buyerId:!0,sellerId:!0,first_name:!0,last_name:!0,secure_email:!0,issuerName:!0,expirationMonth:!0,expirationYear:!0,lastFourDigits:!0},Ta={A:["href"],INPUT:["value","placeholder"],TEXTAREA:["value","placeholder"],OPTION:["label","value"],PROGRESS:["value"],OPTGROUP:["label"],IMG:["alt"],DIV:["title"],DEFAULT:["textContent"]},ba=/[.*+?^${}()|[\]\\]/g,wa=e=>e.replace(ba,"\\$&"),Aa=e=>{const t=[];for(let n=0;n<e;n++)t.push(Ia[Math.floor(Math.random()*Ia.length)]);return t.join("")},Na=new RegExp("[\\s_-]+","g"),Ma=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Da=/\d+/,Oa=/[^@\s]+@[^@\s]+\.[^@\s]+/,Ra=/(?:\d{1,3}\.){3}\d{1,3}/,ka=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,_a=(e,t="")=>(e=>va([e.classList||[]]).some((e=>Sa[e])))(e)||(e=>[e.name,e.id].map((e=>e?e.replace(Na,"").toLowerCase():e)).some((e=>Ea[e])))(e)||(e=>Da.test(e))(t)||(e=>Ma.test(e))(t)||(e=>e.indexOf("@")>-1&&Oa.test(e))(t)||(e=>Ra.test(e)||ka.test(e))(t),xa=e=>{const t=[];return va([e]).forEach((e=>{if(Ca[e.tagName])return;if((e.children||[]).length>0)return;const n=va([Ta.DEFAULT,Ta[e.tagName]||[]]).reduce(((t,n)=>{const r=e[n],o=_a(e,r);return r&&o&&t.push(r),t}),[]);n.length&&t.push({el:e.outerHTML,attrs:n})})),t},La=new RegExp(/[a-zA-Z0-9äÄëËïÏöÖüÜáéíóúáéíóúÁÉÍÓÚÂÊÎÔÛâêîôûàèìòùÀÈÌÒÙ.]/,"i"),Fa=e=>{const t=[{original:"<iframe.*?>.*<\\/iframe>",translated:""},{original:"<noscript.*?>.*<\\/noscript>",translated:""},{original:'"(addresses)":+\\s*[[][\\s\\S]*?[]],*',translated:""},{original:'"(phone|address|address|alternative_phone|identification)":+\\s*[{][\\s\\S]*?[}],*',translated:""},{original:"(user)+\\s*:\\s*[{]+[\\s\\S]*?[}]+?",translated:"$1: {}"},{original:"[a-z0-9.+-]+@+[a-z0-9.+-]+",translated:"***@***.***"},{original:`"(${Object.keys(Ea).join("|")})"+\\s*:\\s*"+[a-z0-9.+-\\s]+"+?`,translated:'"$1":"abc123"'},{original:`"(${Object.keys(Ea).join("|")})"+\\s*:\\s*[^"][0-9]+`,translated:'"$1":123987546'}];return e.reduce(((e,t)=>{const n=t.el;return t.attrs.forEach((e=>{t.el=t.el.replace(e,(e=>e.startsWith("http")?"#":e.split(" ").map((e=>La.test(e)?Aa(e.length):e)).join(" "))(e))})),e.push({original:wa(n),translated:wa(t.el)}),e}),t)};var Ba={anonymizeDOM:e=>{const t=xa(((e="*")=>document.body.querySelectorAll(e))()),n=Fa(t);return ya(n,e)},generateRandomText:Aa,shouldSuppressData:_a,extractMessages:xa,generateTranslations:Fa};const{A11Y:Pa}=l,{WINDOW_DOM:Ua}=D,{trackMetric:Wa,sendFormData:Va,getMetricsCollected:Ga}=yn,{anonymizeDOM:ja}=Ba,Ya=window.requestIdleCallback||(e=>setTimeout(e,200));let Za=!1;const Ha=e=>{Za||(Za=Va({id:Pa},e,Ga()))},Ka=e=>{try{(()=>{const{document:e}=window;if(!e||!e.documentElement||!e.documentElement.outerHTML)throw new Error("DOM not found");const t=ja(e.documentElement.outerHTML);Wa(Ua,t)})(),Ha(e)}catch(e){}};var za=e=>{Ya((()=>Ka(e)))};const{trackMetric:Ja}=yn,{WINDOW_HEIGHT:Xa,WINDOW_WIDTH:Qa}=D;const qa=za,$a=En,es=Mn,ts=qo,ns=()=>{const{innerWidth:e,innerHeight:t}=window;e&&Ja(Qa,`${e}`),t&&Ja(Xa,`${t}`)},{prepareConfiguration:rs}=Pe,{supportsFetchApi:os}=i;var is={start:e=>{const t=rs(e);if(t)try{os()&&($a(),es(),ns(),qa(t),ts())}catch(e){}}};const{AVAILABILITY:as}=l,{AVAILABILITY_FAILURE:ss,AVAILABILITY_TRANSFER_SIZE:cs,AVAILABILITY_BROWSER_ERRORS:ls}=D,{appendMetric:ds,sendMetrics:us,getMetricsCollected:hs}=yn,{subscribe:ps}=c,ms=window.requestIdleCallback||(e=>setTimeout(e,200)),fs="availabilityEvent";let gs=!1;const vs=e=>{(e=>{const t=()=>{"hidden"===window.document.visibilityState&&(us({id:as},e,hs()),window.document.removeEventListener(fs,t),gs=!1)};gs||(window.document.addEventListener(fs,t),gs=!0),window.document.addEventListener("visibilitychange",(()=>{const e=new window.Event(fs);window.document.dispatchEvent(e)}))})(e)};var ys=e=>{ps(ss,(e=>{e&&ds(ss,e)})),ps(cs,(e=>{e&&ds(cs,e)})),ps(ls,(e=>{e&&ds(ls,e)})),ms((()=>vs(e)))};const{AVAILABILITY_FAILURE:Is}=D,{queue:Cs}=c;var Ss=()=>{const{_pfl:e}=window;(e||[]).forEach((e=>{const[t,n]=e;Cs(Is,{filename:n,initiator:t,value:1})}))};const{appendMetric:Es}=yn,{supportsPerformanceApi:Ts}=i,{AVAILABILITY_TRANSFER_SIZE:bs}=D,{thresholdEntries:ws,fileSupport:As}=g,Ns=e=>e.substring(e.lastIndexOf(".")+1,e.length),Ms=e=>{const t=Ns(e);return Object.keys(As).find((e=>As[e].some((e=>e===t))))},Ds=e=>{const{type:t,value:n,name:r}=e;n>(ws[t]||0)&&Es(bs,{filename:r,initiator:t,value:n})};var Os=()=>{const e=(()=>{if(!Ts())return[];const{performance:e}=window,t=Object.keys(As).reduce(((e,t)=>e.concat(As[t])),[]);return e.getEntries().filter((e=>t.some((t=>t===Ns(e.name))))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t)).map((e=>{const t=e.encodedBodySize&&e.encodedBodySize>0?e.encodedBodySize:e.transferSize;return{name:e.name,type:Ms(e.name),value:t}}))})();e.forEach(Ds)};const Rs=ys,ks=En,_s=Mn,{prepareConfiguration:xs}=Pe,Ls=qo,Fs=Ss,Bs=Os,{supportsBeaconOrFetch:Ps}=i;var Us={start:e=>{const t=xs(e);if(t)try{Ps()&&(ks(),_s(),Rs(t),Fs(),Bs(),Ls())}catch(e){}}};const{CDN_HEALTH:Ws}=l,{AVAILABILITY_FAILURE:Vs}=D,{appendMetric:Gs,sendMetrics:js,getMetricsCollected:Ys}=yn,{subscribe:Zs}=c,Hs=window.requestIdleCallback||(e=>setTimeout(e,200)),Ks="cdnHealthEvent";let zs=!1;const Js=e=>{(e=>{const t=()=>{"hidden"===window.document.visibilityState&&(js({id:Ws},e,Ys()),window.document.removeEventListener(Ks,t),zs=!1)};zs||(window.document.addEventListener(Ks,t),zs=!0),window.document.addEventListener("visibilitychange",(()=>{const e=new window.Event(Ks);window.document.dispatchEvent(e)}))})(e)};var Xs=e=>{Zs(Vs,(e=>{e&&Gs(Vs,e)})),Hs((()=>Js(e)))};const{trackMetric:Qs}=yn,{supportsFetchApi:qs}=i,{getWithFetch:$s}=Jt,{X_CDN:ec}=D,tc={g:"google",a:"akamai"};var nc=()=>qs()?$s("https://http2.mlstatic.com/cdn/ping.gif").then((e=>{if(e.headers.has("x-cdn")){const t=e.headers.get("x-cdn");Qs(ec,tc[t])}})).catch((e=>e)):null;const{trackMetric:rc}=yn,{supportsPerformanceApi:oc}=i,{toFixedNumber:ic}=Dn,{DURATION_SUM:ac,RESOURCE_SIZE:sc}=D;var cc=()=>{if(!oc())return;const e=window.performance.getEntriesByType("resource").filter((e=>new RegExp("http2.mlstatic.com").test(e.name))),t=e.reduce(((e,t)=>e+=t.duration),0);rc(ac,ic(t)),rc(sc,e.length)};const lc=Xs,dc=nc,uc=En,hc=Mn,{prepareConfiguration:pc}=Pe,mc=qo,fc=Ss,gc=cc,{supportsBeaconOrFetch:vc}=i;var yc={start:e=>{const t=pc(e);if(t)try{vc()&&(dc(),fc(),lc(t),gc(),uc(),hc(),mc())}catch(e){}}};const{objectOperator:Ic}=p,{AVAILABILITY:Cc,CDN_HEALTH:Sc}=l,{start:Ec}=yc,{start:Tc}=Us;var bc={start:e=>{Ec(Ic({args:e,id:Sc})),Tc(Ic({args:e,id:Cc}))}};var wc={getCookie:(e,t=null)=>{const n=document.cookie.match(new RegExp(`(^| )${e}=([^;]+)`));return n?n[2]:t},setCookie:(e,t,n={})=>{document.cookie=`${e}=${t}; ${Object.keys(n).map((e=>`${e}=${n[e]}`)).join("; ")}`}};const Ac=(e,t,n)=>{let r=[];for(const o in e)e.hasOwnProperty(o)&&(o===t&&e[o]===n?r.push(e):"object"==typeof e[o]&&(r=r.concat(Ac(e[o],t,n))));return r};var Nc=Ac;const{getCookie:Mc}=wc,Dc=Nc;var Oc={getUserId:(e=null)=>{const t=window.melidata_namespace&&window.melidata_namespace.actual_track&&window.melidata_namespace.actual_track.user&&window.melidata_namespace.actual_track.user.user_id,n=Mc("orguseridp",t);return n&&!Number.isNaN(parseInt(n,10))?parseInt(n,10):e},getPath:()=>{const e=window.melidata_namespace&&window.melidata_namespace.actual_track&&window.melidata_namespace.actual_track.path?window.melidata_namespace.actual_track.path:null;if(e)return e;let t=null;try{t=(e=>{if(!e)return null;const t=Dc(e,"provider","melidata"),n=Dc(t,"type","view").pop();return n?n.path:null})(window.__PRELOADED_STATE__.floxResponse)}catch(e){}const n=window.location.pathname||null;return t||n}};const{trackMetric:Rc}=yn,{APP_NAME:kc,SCOPE_NAME:_c,DEVICE:xc,PLATFORM_ID:Lc,SITE_ID:Fc,WEBVIEW:Bc,REQUEST_ID:Pc,VIEW_NAME:Uc,USER_ID:Wc}=D,Vc=M,{getUserId:Gc,getPath:jc}=Oc;var Yc,Zc=e=>{const t=Vc(e,[kc,_c,xc,Lc,Fc,Bc,Pc]),n=jc();n&&Rc(Uc,n);const r=Gc();r&&Rc(Wc,parseInt(r,10)),Object.keys(t).forEach((e=>{t[e]&&Rc(e,t[e])}))};function Hc(e){return e.nodeType===e.ELEMENT_NODE}function Kc(e){var t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}function zc(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Jc(e){try{var t=e.rules||e.cssRules;return t?((n=Array.from(t).map(Xc).join("")).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n):null}catch(e){return null}var n}function Xc(e){var t;if(function(e){return"styleSheet"in e}(e))try{t=Jc(e.styleSheet)||function(e){var t=e.cssText;if(t.split('"').length<3)return t;var n=["@import","url(".concat(JSON.stringify(e.href),")")];return""===e.layerName?n.push("layer"):e.layerName&&n.push("layer(".concat(e.layerName,")")),e.supportsText&&n.push("supports(".concat(e.supportsText,")")),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}return function(e){if(e.includes(":")){var t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}return e}(t||e.cssText)}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Yc||(Yc={}));var Qc=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function qc(){return new Qc}function $c(e){var t=e.element,n=e.maskInputOptions,r=e.tagName,o=e.type,i=e.value,a=e.maskInputFn,s=i||"",c=o&&el(o);return(n[r.toLowerCase()]||c&&n[c])&&(s=a?a(s,t):"*".repeat(s.length)),s}function el(e){return e.toLowerCase()}var tl="__rrweb_original__";function nl(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?el(t):null}var rl,ol,il=1,al=new RegExp("[^a-z0-9-_:]"),sl=-2;function cl(){return il++}var ll=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,dl=/^(?:[a-z+]+:)?\/\//i,ul=/^www\..*/i,hl=/^(data:)([^,]*),(.*)/i;function pl(e,t){return(e||"").replace(ll,(function(e,n,r,o,i,a){var s,c=r||i||a,l=n||o||"";if(!c)return e;if(dl.test(c)||ul.test(c))return"url(".concat(l).concat(c).concat(l,")");if(hl.test(c))return"url(".concat(l).concat(c).concat(l,")");if("/"===c[0])return"url(".concat(l).concat((s=t,(s.indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+c)).concat(l,")");var d=t.split("/"),u=c.split("/");d.pop();for(var h=0,p=u;h<p.length;h++){var m=p[h];"."!==m&&(".."===m?d.pop():d.push(m))}return"url(".concat(l).concat(d.join("/")).concat(l,")")}))}var ml=/^[^ \t\n\r\u000c]+/,fl=/^[, \t\n\r\u000c]+/;function gl(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function vl(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function yl(){var e=document.createElement("a");return e.href="",e.href}function Il(e,t,n,r){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?gl(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var o=[];r(fl),!(n>=t.length);){var i=r(ml);if(","===i.slice(-1))i=gl(e,i.substring(0,i.length-1)),o.push(i);else{var a="";i=gl(e,i);for(var s=!1;;){var c=t.charAt(n);if(""===c){o.push((i+a).trim());break}if(s)")"===c&&(s=!1);else{if(","===c){n+=1,o.push((i+a).trim());break}"("===c&&(s=!0)}a+=c,n+=1}}}return o.join(", ")}(e,r):"style"===n?pl(r,yl()):"object"===t&&"data"===n?gl(e,r):r:gl(e,r):r}function Cl(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Sl(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&Sl(e.parentNode,t,n);for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return!!n&&Sl(e.parentNode,t,n)}function El(e,t,n){try{var r=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===r)return!1;if("string"==typeof t){if(r.classList.contains(t))return!0;if(r.closest(".".concat(t)))return!0}else if(Sl(r,t,!0))return!0;if(n){if(r.matches(n))return!0;if(r.closest(n))return!0}}catch(e){}return!1}function Tl(e,t){var n=t.doc,r=t.mirror,o=t.blockClass,i=t.blockSelector,a=t.maskTextClass,s=t.maskTextSelector,c=t.inlineStylesheet,l=t.maskInputOptions,d=void 0===l?{}:l,u=t.maskTextFn,h=t.maskInputFn,p=t.dataURLOptions,m=void 0===p?{}:p,f=t.inlineImages,g=t.recordCanvas,v=t.keepIframeSrcFn,y=t.newlyAddedElement,I=void 0!==y&&y,C=function(e,t){if(!t.hasNode(e))return;var n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Yc.Document,childNodes:[],compatMode:e.compatMode}:{type:Yc.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Yc.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:C};case e.ELEMENT_NODE:return function(e,t){for(var n=t.doc,r=t.blockClass,o=t.blockSelector,i=t.inlineStylesheet,a=t.maskInputOptions,s=void 0===a?{}:a,c=t.maskInputFn,l=t.dataURLOptions,d=void 0===l?{}:l,u=t.inlineImages,h=t.recordCanvas,p=t.keepIframeSrcFn,m=t.newlyAddedElement,f=void 0!==m&&m,g=t.rootId,v=function(e,t,n){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o),y=function(e){if(e instanceof HTMLFormElement)return"form";var t=el(e.tagName);return al.test(t)?"div":t}(e),I={},C=e.attributes.length,S=0;S<C;S++){var E=e.attributes[S];Cl(y,E.name,E.value)||(I[E.name]=Il(n,y,el(E.name),E.value))}if("link"===y&&i){var T=Array.from(n.styleSheets).find((function(t){return t.href===e.href})),b=null;T&&(b=Jc(T)),b&&(delete I.rel,delete I.href,I._cssText=pl(b,T.href))}if("style"===y&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){(b=Jc(e.sheet))&&(I._cssText=pl(b,yl()))}if("input"===y||"textarea"===y||"select"===y){var w=e.value,A=e.checked;if("radio"!==I.type&&"checkbox"!==I.type&&"submit"!==I.type&&"button"!==I.type&&w){var N=nl(e);I.value=$c({element:e,type:N,tagName:y,value:w,maskInputOptions:s,maskInputFn:c})}else A&&(I.checked=A)}"option"===y&&(e.selected&&!s.select?I.selected=!0:delete I.selected);if("canvas"===y&&h)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var o=t.getImageData,i=tl in o?o[tl]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(I.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){var M=e.toDataURL(d.type,d.quality),D=document.createElement("canvas");D.width=e.width,D.height=e.height,M!==D.toDataURL(d.type,d.quality)&&(I.rr_dataURL=M)}if("img"===y&&u){rl||(rl=n.createElement("canvas"),ol=rl.getContext("2d"));var O=e,R=O.crossOrigin;O.crossOrigin="anonymous";var k=function(){O.removeEventListener("load",k);try{rl.width=O.naturalWidth,rl.height=O.naturalHeight,ol.drawImage(O,0,0),I.rr_dataURL=rl.toDataURL(d.type,d.quality)}catch(e){console.warn("Cannot inline img src=".concat(O.currentSrc,"! Error: ").concat(e))}R?I.crossOrigin=R:O.removeAttribute("crossorigin")};O.complete&&0!==O.naturalWidth?k():O.addEventListener("load",k)}"audio"!==y&&"video"!==y||(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop));if(v){var _=e.getBoundingClientRect(),x=_.width,L=_.height;I={class:I.class,rr_width:"".concat(x,"px"),rr_height:"".concat(L,"px")}}"iframe"!==y||p(I.src)||(e.contentDocument||(I.rr_src=I.src),delete I.src);return{type:Yc.Element,tagName:y,attributes:I,childNodes:[],isSVG:vl(e)||void 0,needBlock:v,rootId:g}}(e,{doc:n,blockClass:o,blockSelector:i,inlineStylesheet:c,maskInputOptions:d,maskInputFn:h,dataURLOptions:m,inlineImages:f,recordCanvas:g,keepIframeSrcFn:v,newlyAddedElement:I,rootId:C});case e.TEXT_NODE:return function(e,t){var n,r=t.maskTextClass,o=t.maskTextSelector,i=t.maskTextFn,a=t.rootId,s=e.parentNode&&e.parentNode.tagName,c=e.textContent,l="STYLE"===s||void 0,d="SCRIPT"===s||void 0;if(l&&c){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(c=Jc(e.parentNode.sheet))}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t),e)}c=pl(c,yl())}d&&(c="SCRIPT_PLACEHOLDER");!l&&!d&&c&&El(e,r,o)&&(c=i?i(c):c.replace(/[\S]/g,"*"));return{type:Yc.Text,textContent:c||"",isStyle:l,rootId:a}}(e,{maskTextClass:a,maskTextSelector:s,maskTextFn:u,rootId:C});case e.CDATA_SECTION_NODE:return{type:Yc.CDATA,textContent:"",rootId:C};case e.COMMENT_NODE:return{type:Yc.Comment,textContent:e.textContent||"",rootId:C};default:return!1}}function bl(e){return null==e?"":e.toLowerCase()}function wl(e,t){var n,r=t.doc,o=t.mirror,i=t.blockClass,a=t.blockSelector,s=t.maskTextClass,c=t.maskTextSelector,l=t.skipChild,d=void 0!==l&&l,u=t.inlineStylesheet,h=void 0===u||u,p=t.maskInputOptions,m=void 0===p?{}:p,f=t.maskTextFn,g=t.maskInputFn,v=t.slimDOMOptions,y=t.dataURLOptions,I=void 0===y?{}:y,C=t.inlineImages,S=void 0!==C&&C,E=t.recordCanvas,T=void 0!==E&&E,b=t.onSerialize,w=t.onIframeLoad,A=t.iframeLoadTimeout,N=void 0===A?5e3:A,M=t.onStylesheetLoad,D=t.stylesheetLoadTimeout,O=void 0===D?5e3:D,R=t.keepIframeSrcFn,k=void 0===R?function(){return!1}:R,_=t.newlyAddedElement,x=void 0!==_&&_,L=t.preserveWhiteSpace,F=void 0===L||L,B=Tl(e,{doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,inlineStylesheet:h,maskInputOptions:m,maskTextFn:f,maskInputFn:g,dataURLOptions:I,inlineImages:S,recordCanvas:T,keepIframeSrcFn:k,newlyAddedElement:x});if(!B)return console.warn(e,"not serialized"),null;n=o.hasNode(e)?o.getId(e):!function(e,t){if(t.comment&&e.type===Yc.Comment)return!0;if(e.type===Yc.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(bl(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===bl(e.attributes.name)||"icon"===bl(e.attributes.rel)||"apple-touch-icon"===bl(e.attributes.rel)||"shortcut icon"===bl(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&bl(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(bl(e.attributes.property).match(/^(og|twitter|fb):/)||bl(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===bl(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===bl(e.attributes.name)||"googlebot"===bl(e.attributes.name)||"bingbot"===bl(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===bl(e.attributes.name)||"generator"===bl(e.attributes.name)||"framework"===bl(e.attributes.name)||"publisher"===bl(e.attributes.name)||"progid"===bl(e.attributes.name)||bl(e.attributes.property).match(/^article:/)||bl(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===bl(e.attributes.name)||"yandex-verification"===bl(e.attributes.name)||"csrf-token"===bl(e.attributes.name)||"p:domain_verify"===bl(e.attributes.name)||"verify-v1"===bl(e.attributes.name)||"verification"===bl(e.attributes.name)||"shopify-checkout-api-token"===bl(e.attributes.name)))return!0}}return!1}(B,v)&&(F||B.type!==Yc.Text||B.isStyle||B.textContent.replace(/^\s+|\s+$/gm,"").length)?cl():sl;var P=Object.assign(B,{id:n});if(o.add(e,P),n===sl)return null;b&&b(e);var U=!d;if(P.type===Yc.Element){U=U&&!P.needBlock,delete P.needBlock;var W=e.shadowRoot;W&&zc(W)&&(P.isShadowHost=!0)}if((P.type===Yc.Document||P.type===Yc.Element)&&U){v.headWhitespace&&P.type===Yc.Element&&"head"===P.tagName&&(F=!1);for(var V={doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:d,inlineStylesheet:h,maskInputOptions:m,maskTextFn:f,maskInputFn:g,slimDOMOptions:v,dataURLOptions:I,inlineImages:S,recordCanvas:T,preserveWhiteSpace:F,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:N,onStylesheetLoad:M,stylesheetLoadTimeout:O,keepIframeSrcFn:k},G=0,j=Array.from(e.childNodes);G<j.length;G++){(H=wl(j[G],V))&&P.childNodes.push(H)}if(Hc(e)&&e.shadowRoot)for(var Y=0,Z=Array.from(e.shadowRoot.childNodes);Y<Z.length;Y++){var H;(H=wl(Z[Y],V))&&(zc(e.shadowRoot)&&(H.isShadow=!0),P.childNodes.push(H))}}return e.parentNode&&Kc(e.parentNode)&&zc(e.parentNode)&&(P.isShadow=!0),P.type===Yc.Element&&"iframe"===P.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o,i=!1;try{o=r.document.readyState}catch(e){return}if("complete"===o){var a="about:blank";if(r.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}else{var s=setTimeout((function(){i||(t(),i=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),i=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&w){var n=wl(t,{doc:t,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskTextFn:f,maskInputFn:g,slimDOMOptions:v,dataURLOptions:I,inlineImages:S,recordCanvas:T,preserveWhiteSpace:F,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:N,onStylesheetLoad:M,stylesheetLoadTimeout:O,keepIframeSrcFn:k});n&&w(e,n)}}),N),P.type===Yc.Element&&"link"===P.tagName&&"stylesheet"===P.attributes.rel&&function(e,t,n){var r,o=!1;try{r=e.sheet}catch(e){return}if(!r){var i=setTimeout((function(){o||(t(),o=!0)}),n);e.addEventListener("load",(function(){clearTimeout(i),o=!0,t()}))}}(e,(function(){if(M){var t=wl(e,{doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskTextFn:f,maskInputFn:g,slimDOMOptions:v,dataURLOptions:I,inlineImages:S,recordCanvas:T,preserveWhiteSpace:F,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:N,onStylesheetLoad:M,stylesheetLoadTimeout:O,keepIframeSrcFn:k});t&&M(e,t)}}),O),P}var Al=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function Nl(e,t){void 0===t&&(t={});var n=1,r=1;function o(e){var t=e.match(/\n/g);t&&(n+=t.length);var o=e.lastIndexOf("\n");r=-1===o?r+e.length:e.length-o}function i(){var e={line:n,column:r};return function(t){return t.position=new a(e),p(),t}}var a=function(e){this.start=e,this.end={line:n,column:r},this.source=t.source};a.prototype.content=e;var s=[];function c(o){var i=new Error("".concat(t.source||"",":").concat(n,":").concat(r,": ").concat(o));if(i.reason=o,i.filename=t.source,i.line=n,i.column=r,i.source=e,!t.silent)throw i;s.push(i)}function l(){return h(/^{\s*/)}function d(){return h(/^}/)}function u(){var t,n=[];for(p(),m(n);e.length&&"}"!==e.charAt(0)&&(t=w()||A());)t&&(n.push(t),m(n));return n}function h(t){var n=t.exec(e);if(n){var r=n[0];return o(r),e=e.slice(r.length),n}}function p(){h(/^\s*/)}function m(e){var t;for(void 0===e&&(e=[]);t=f();)t&&e.push(t),t=f();return e}function f(){var t=i();if("/"===e.charAt(0)&&"*"===e.charAt(1)){for(var n=2;""!==e.charAt(n)&&("*"!==e.charAt(n)||"/"!==e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return c("End of comment missing");var a=e.slice(2,n-2);return r+=2,o(a),e=e.slice(n),r+=2,t({type:"comment",comment:a})}}function g(){var e=h(/^([^{]+)/);if(e)return Ml(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(e){return e.replace(/,/g,"‌")})).split(/\s*(?![^(]*\)),\s*/).map((function(e){return e.replace(/\u200C/g,",")}))}function v(){var e=i(),t=h(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(t){var n=Ml(t[0]);if(!h(/^:\s*/))return c("property missing ':'");var r=h(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),o=e({type:"declaration",property:n.replace(Al,""),value:r?Ml(r[0]).replace(Al,""):""});return h(/^[;\s]*/),o}}function y(){var e,t=[];if(!l())return c("missing '{'");for(m(t);e=v();)!1!==e&&(t.push(e),m(t)),e=v();return d()?t:c("missing '}'")}function I(){for(var e,t=[],n=i();e=h(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),h(/^,\s*/);if(t.length)return n({type:"keyframe",values:t,declarations:y()})}var C,S=b("import"),E=b("charset"),T=b("namespace");function b(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var n=i(),r=h(t);if(r){var o={type:e};return o[e]=r[1].trim(),n(o)}}}function w(){if("@"===e[0])return function(){var e=i(),t=h(/^@([-\w]+)?keyframes\s*/);if(t){var n=t[1];if(!(t=h(/^([-\w]+)\s*/)))return c("@keyframes missing name");var r,o=t[1];if(!l())return c("@keyframes missing '{'");for(var a=m();r=I();)a.push(r),a=a.concat(m());return d()?e({type:"keyframes",name:o,vendor:n,keyframes:a}):c("@keyframes missing '}'")}}()||function(){var e=i(),t=h(/^@media *([^{]+)/);if(t){var n=Ml(t[1]);if(!l())return c("@media missing '{'");var r=m().concat(u());return d()?e({type:"media",media:n,rules:r}):c("@media missing '}'")}}()||function(){var e=i(),t=h(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return e({type:"custom-media",name:Ml(t[1]),media:Ml(t[2])})}()||function(){var e=i(),t=h(/^@supports *([^{]+)/);if(t){var n=Ml(t[1]);if(!l())return c("@supports missing '{'");var r=m().concat(u());return d()?e({type:"supports",supports:n,rules:r}):c("@supports missing '}'")}}()||S()||E()||T()||function(){var e=i(),t=h(/^@([-\w]+)?document *([^{]+)/);if(t){var n=Ml(t[1]),r=Ml(t[2]);if(!l())return c("@document missing '{'");var o=m().concat(u());return d()?e({type:"document",document:r,vendor:n,rules:o}):c("@document missing '}'")}}()||function(){var e=i();if(h(/^@page */)){var t=g()||[];if(!l())return c("@page missing '{'");for(var n,r=m();n=v();)r.push(n),r=r.concat(m());return d()?e({type:"page",selectors:t,declarations:r}):c("@page missing '}'")}}()||function(){var e=i();if(h(/^@host\s*/)){if(!l())return c("@host missing '{'");var t=m().concat(u());return d()?e({type:"host",rules:t}):c("@host missing '}'")}}()||function(){var e=i();if(h(/^@font-face\s*/)){if(!l())return c("@font-face missing '{'");for(var t,n=m();t=v();)n.push(t),n=n.concat(m());return d()?e({type:"font-face",declarations:n}):c("@font-face missing '}'")}}()}function A(){var e=i(),t=g();return t?(m(),e({type:"rule",selectors:t,declarations:y()})):c("selector missing")}return Dl((C=u(),{type:"stylesheet",stylesheet:{source:t.source,rules:C,parsingErrors:s}}))}function Ml(e){return e?e.replace(/^\s+|\s+$/g,""):""}function Dl(e,t){for(var n=e&&"string"==typeof e.type,r=n?e:t,o=0,i=Object.keys(e);o<i.length;o++){var a=e[i[o]];Array.isArray(a)?a.forEach((function(e){Dl(e,r)})):a&&"object"==typeof a&&Dl(a,r)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var Ol={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};var Rl=/([^\\]):hover/,kl=new RegExp(Rl.source,"g");function _l(e,t){var n=null==t?void 0:t.stylesWithHoverClass.get(e);if(n)return n;var r=Nl(e,{silent:!0});if(!r.stylesheet)return e;var o=[];if(r.stylesheet.rules.forEach((function(e){"selectors"in e&&(e.selectors||[]).forEach((function(e){Rl.test(e)&&o.push(e)}))})),0===o.length)return e;var i=new RegExp(o.filter((function(e,t){return o.indexOf(e)===t})).sort((function(e,t){return t.length-e.length})).map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})).join("|"),"g"),a=e.replace(i,(function(e){var t=e.replace(kl,"$1.\\:hover");return"".concat(e,", ").concat(t)}));return null==t||t.stylesWithHoverClass.set(e,a),a}function xl(){return{stylesWithHoverClass:new Map}}function Ll(e,t){var n=t.doc,r=t.hackCss,o=t.cache;switch(e.type){case Yc.Document:return n.implementation.createDocument(null,"",null);case Yc.DocumentType:return n.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case Yc.Element:var i,a=function(e){var t=Ol[e.tagName]?Ol[e.tagName]:e.tagName;return"link"===t&&e.attributes._cssText&&(t="style"),t}(e);i=e.isSVG?n.createElementNS("http://www.w3.org/2000/svg",a):n.createElement(a);var s={};for(var c in e.attributes)if(Object.prototype.hasOwnProperty.call(e.attributes,c)){var l=e.attributes[c];if(("option"!==a||"selected"!==c||!1!==l)&&null!==l)if(!0===l&&(l=""),c.startsWith("rr_"))s[c]=l;else{var d="textarea"===a&&"value"===c,u="style"===a&&"_cssText"===c;if(u&&r&&"string"==typeof l&&(l=_l(l,o)),!d&&!u||"string"!=typeof l)try{if(e.isSVG&&"xlink:href"===c)i.setAttributeNS("http://www.w3.org/1999/xlink",c,l.toString());else if("onload"===c||"onclick"===c||"onmouse"===c.substring(0,7))i.setAttribute("_"+c,l.toString());else{if("meta"===a&&"Content-Security-Policy"===e.attributes["http-equiv"]&&"content"===c){i.setAttribute("csp-content",l.toString());continue}("link"!==a||"preload"!==e.attributes.rel&&"modulepreload"!==e.attributes.rel||"script"!==e.attributes.as)&&("link"===a&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")||("img"===a&&e.attributes.srcset&&e.attributes.rr_dataURL?i.setAttribute("rrweb-original-srcset",e.attributes.srcset):i.setAttribute(c,l.toString())))}}catch(e){}else{for(var h=n.createTextNode(l),p=0,m=Array.from(i.childNodes);p<m.length;p++){var f=m[p];f.nodeType===i.TEXT_NODE&&i.removeChild(f)}i.appendChild(h)}}}var g=function(t){var n=s[t];if("canvas"===a&&"rr_dataURL"===t){var r=document.createElement("img");r.onload=function(){var e=i.getContext("2d");e&&e.drawImage(r,0,0,r.width,r.height)},r.src=n.toString(),i.RRNodeType&&(i.rr_dataURL=n.toString())}else if("img"===a&&"rr_dataURL"===t){var o=i;o.currentSrc.startsWith("data:")||(o.setAttribute("rrweb-original-src",e.attributes.src),o.src=n.toString())}if("rr_width"===t)i.style.width=n.toString();else if("rr_height"===t)i.style.height=n.toString();else if("rr_mediaCurrentTime"===t&&"number"==typeof n)i.currentTime=n;else if("rr_mediaState"===t)switch(n){case"played":i.play().catch((function(e){return console.warn("media playback error",e)}));break;case"paused":i.pause()}};for(var v in s)g(v);if(e.isShadowHost)if(i.shadowRoot)for(;i.shadowRoot.firstChild;)i.shadowRoot.removeChild(i.shadowRoot.firstChild);else i.attachShadow({mode:"open"});return i;case Yc.Text:return n.createTextNode(e.isStyle&&r?_l(e.textContent,o):e.textContent);case Yc.CDATA:return n.createCDATASection(e.textContent);case Yc.Comment:return n.createComment(e.textContent);default:return null}}function Fl(e,t){var n=t.doc,r=t.mirror,o=t.skipChild,i=void 0!==o&&o,a=t.hackCss,s=void 0===a||a,c=t.afterAppend,l=t.cache;if(r.has(e.id)){var d=r.getNode(e.id);if(function(e,t){return!(!e||!t||e.type!==t.type)&&(e.type===Yc.Document?e.compatMode===t.compatMode:e.type===Yc.DocumentType?e.name===t.name&&e.publicId===t.publicId&&e.systemId===t.systemId:e.type===Yc.Comment||e.type===Yc.Text||e.type===Yc.CDATA?e.textContent===t.textContent:e.type===Yc.Element&&e.tagName===t.tagName&&JSON.stringify(e.attributes)===JSON.stringify(t.attributes)&&e.isSVG===t.isSVG&&e.needBlock===t.needBlock)}(r.getMeta(d),e))return r.getNode(e.id)}var u=Ll(e,{doc:n,hackCss:s,cache:l});if(!u)return null;if(e.rootId&&r.getNode(e.rootId)!==n&&r.replace(e.rootId,n),e.type===Yc.Document&&(n.close(),n.open(),"BackCompat"===e.compatMode&&e.childNodes&&e.childNodes[0].type!==Yc.DocumentType&&(e.childNodes[0].type===Yc.Element&&"xmlns"in e.childNodes[0].attributes&&"http://www.w3.org/1999/xhtml"===e.childNodes[0].attributes.xmlns?n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),u=n),r.add(u,e),(e.type===Yc.Document||e.type===Yc.Element)&&!i)for(var h=function(t){var o=Fl(t,{doc:n,mirror:r,skipChild:!1,hackCss:s,afterAppend:c,cache:l});if(!o)return console.warn("Failed to rebuild",t),"continue";if(t.isShadow&&Hc(u)&&u.shadowRoot)u.shadowRoot.appendChild(o);else if(e.type===Yc.Document&&t.type==Yc.Element){var i=o,a=null;i.childNodes.forEach((function(e){"BODY"===e.nodeName&&(a=e)})),a?(i.removeChild(a),u.appendChild(o),i.appendChild(a)):u.appendChild(o)}else u.appendChild(o);c&&c(o,t.id)},p=0,m=e.childNodes;p<m.length;p++){h(m[p])}return u}function Bl(e,t){var n=t.doc,r=t.onVisit,o=t.hackCss,i=void 0===o||o,a=t.afterAppend,s=t.cache,c=t.mirror,l=void 0===c?new Qc:c,d=Fl(e,{doc:n,mirror:l,skipChild:!1,hackCss:i,afterAppend:a,cache:s});return function(e,t){for(var n=0,r=e.getIds();n<r.length;n++){var o=r[n];e.has(o)&&t(e.getNode(o))}}(l,(function(e){r&&r(e),function(e,t){var n=t.getMeta(e);if((null==n?void 0:n.type)===Yc.Element){var r=e;for(var o in n.attributes)if(Object.prototype.hasOwnProperty.call(n.attributes,o)&&o.startsWith("rr_")){var i=n.attributes[o];"rr_scrollLeft"===o&&(r.scrollLeft=i),"rr_scrollTop"===o&&(r.scrollTop=i)}}}(e,l)})),d}function Pl(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Ul="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Wl={map:{},getId:()=>(console.error(Ul),-1),getNode:()=>(console.error(Ul),null),removeNodeFromMap(){console.error(Ul)},has:()=>(console.error(Ul),!1),reset(){console.error(Ul)}};function Vl(e,t,n={}){let r=null,o=0;return function(...i){const a=Date.now();o||!1!==n.leading||(o=a);const s=t-(a-o),c=this;s<=0||s>t?(r&&(clearTimeout(r),r=null),o=a,e.apply(c,i)):r||!1===n.trailing||(r=setTimeout((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,i)}),s))}}function Gl(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>Gl(e,t,i||{},!0)}function jl(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Wl=new Proxy(Wl,{get:(e,t,n)=>("map"===t&&console.error(Ul),Reflect.get(e,t,n))}));let Yl=Date.now;function Zl(e){var t,n,r,o,i,a;const s=e.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null==s?void 0:s.documentElement.scrollLeft)||(null===(n=null===(t=null==s?void 0:s.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(r=null==s?void 0:s.body)||void 0===r?void 0:r.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==s?void 0:s.documentElement.scrollTop)||(null===(i=null===(o=null==s?void 0:s.body)||void 0===o?void 0:o.parentElement)||void 0===i?void 0:i.scrollTop)||(null===(a=null==s?void 0:s.body)||void 0===a?void 0:a.scrollTop)||0}}function Hl(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Kl(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function zl(e,t,n,r){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;try{if("string"==typeof t){if(o.classList.contains(t))return!0;if(r&&null!==o.closest("."+t))return!0}else if(Sl(o,t,r))return!0}catch(e){}if(n){if(o.matches(n))return!0;if(r&&null!==o.closest(n))return!0}return!1}function Jl(e,t){return-1!==t.getId(e)}function Xl(e,t){return t.getId(e)===sl}function Ql(e,t){if(Kc(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Ql(e.parentNode,t))}function ql(e){return Boolean(e.changedTouches)}function $l(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}function ed(e){const t={},n=(e,n)=>{const r={value:e,parent:n,children:[]};return t[e.node.id]=r,r},r=[];for(const o of e){const{nextId:e,parentId:i}=o;if(e&&e in t){const i=t[e];if(i.parent){const e=i.parent.children.indexOf(i);i.parent.children.splice(e,0,n(o,i.parent))}else{const e=r.indexOf(i);r.splice(e,0,n(o,null))}}else if(i in t){const e=t[i];e.children.push(n(o,e))}else r.push(n(o,null))}return r}function td(e,t){t(e.value);for(let n=e.children.length-1;n>=0;n--)td(e.children[n],t)}function nd(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function rd(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function od(e,t){var n,r;const o=null===(r=null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===r?void 0:r.frameElement;if(!o||o===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const i=o.getBoundingClientRect(),a=od(o,t),s=i.height/o.clientHeight;return{x:i.x*a.relativeScale+a.x,y:i.y*a.relativeScale+a.y,relativeScale:s,absoluteScale:a.absoluteScale*s}}function id(e){return Boolean(null==e?void 0:e.shadowRoot)}function ad(e,t){const n=e[t[0]];return 1===t.length?n:ad(n.cssRules[t[1]].cssRules,t.slice(2))}function sd(e){const t=[...e],n=t.pop();return{positions:t,index:n}}function cd(e){const t=new Set,n=[];for(let r=e.length;r--;){const o=e[r];t.has(o.id)||(n.push(o),t.add(o.id))}return n}/[1-9][0-9]{12}/.test(Date.now().toString())||(Yl=()=>(new Date).getTime());class ld{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function dd(e){var t,n;let r=null;return(null===(n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||void 0===n?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(r=e.getRootNode().host),r}function ud(e){let t,n=e;for(;t=dd(n);)n=t;return n}function hd(e){const t=e.ownerDocument;if(!t)return!1;const n=ud(e);return t.contains(n)}function pd(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||hd(e))}var md=Object.freeze({__proto__:null,StyleSheetMirror:ld,get _mirror(){return Wl},getBaseDimension:od,getNestedRule:ad,getPositionsAndIndex:sd,getRootShadowHost:ud,getShadowHost:dd,getWindowHeight:Hl,getWindowScroll:Zl,getWindowWidth:Kl,hasShadowRoot:id,hookSetter:Gl,inDom:pd,isAncestorRemoved:Ql,isBlocked:zl,isIgnored:Xl,isSerialized:Jl,isSerializedIframe:nd,isSerializedStylesheet:rd,iterateResolveTree:td,legacy_isTouchEvent:ql,get nowTimestamp(){return Yl},on:Pl,patch:jl,polyfill:$l,queueToResolveTrees:ed,shadowHostInDom:hd,throttle:Vl,uniqueTextMutations:cd}),fd=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(fd||{}),gd=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(gd||{}),vd=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(vd||{}),yd=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(yd||{}),Id=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Id||{}),Cd=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e.Destroy="destroy",e))(Cd||{});function Sd(e){return"__ln"in e}class Ed{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Sd(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Sd(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Td=(e,t)=>`${e}@${t}`;class bd{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new Ed,r=e=>{let t=e,n=sl;for(;n===sl;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!pd(o))return;const i=Kc(o.parentNode)?this.mirror.getId(dd(o)):this.mirror.getId(o.parentNode),a=r(o);if(-1===i||-1===a)return n.addNode(o);const s=wl(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{nd(e,this.mirror)&&this.iframeManager.addIframe(e),rd(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),id(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});s&&(e.push({parentId:i,nextId:a,node:s}),t.add(s.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Ad(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)Md(this.droppedSet,e)||Ad(this.removes,e,this.mirror)?Md(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),o(e.value)}const a={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(a.texts.length||a.attributes.length||a.removes.length||a.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(Xl(e.target,this.mirror))return;let t;try{t=document.implementation.createHTMLDocument()}catch(e){t=this.doc}switch(e.type){case"characterData":{const t=e.target.textContent;zl(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:El(e.target,this.maskTextClass,this.maskTextSelector)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,o=e.target.getAttribute(r);if("value"===r){const e=nl(n);o=$c({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:e,value:o,maskInputFn:this.maskInputFn})}if(zl(e.target,this.blockClass,this.blockSelector,!1)||o===e.oldValue)return;let i=this.attributes.find((t=>t.node===e.target));if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(o)){if(n.contentDocument)return;r="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i)),"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!Cl(n.tagName,r)&&(i.attributes[r]=Il(this.doc,el(n.tagName),el(r),o),"style"===r)){const r=t.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),o=n.style.getPropertyPriority(e);t!==r.style.getPropertyValue(e)||o!==r.style.getPropertyPriority(e)?i.styleDiff[e]=""===o?t:[t,o]:i._unchangedStyles[e]=[t,o]}for(const e of Array.from(r.style))""===n.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}break}case"childList":if(zl(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=Kc(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);zl(e.target,this.blockClass,this.blockSelector,!1)||Xl(t,this.mirror)||!Jl(t,this.mirror)||(this.addedSet.has(t)?(wd(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Ql(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Td(n,r)]?wd(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!Kc(e.target)||!zc(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Xl(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Td(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);zl(e,this.blockClass,this.blockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),id(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function wd(e,t){e.delete(t),t.childNodes.forEach((t=>wd(e,t)))}function Ad(e,t,n){return 0!==e.length&&Nd(e,t,n)}function Nd(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||Nd(e,r,n)}function Md(e,t){return 0!==e.size&&Dd(e,t)}function Dd(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Dd(e,n))}let Od;function Rd(e){Od=e}function kd(){Od=void 0}const _d=e=>{if(!Od)return e;return(...t)=>{try{return e(...t)}catch(e){if(Od&&!0===Od(e))return;throw e}}},xd=[];function Ld(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Fd(e,t){var n,r;const o=new bd;xd.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const a=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");a&&window[a]&&(i=window[a]);const s=new i(_d(o.processMutations.bind(o)));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Bd({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,s=[];let c=null;return Object.keys(vd).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{let a=el(i);const l=(t=>i=>{const a=Ld(i);if(zl(a,r,o,!0))return;let s=null,l=t;if("pointerType"in i){switch(i.pointerType){case"mouse":s=yd.Mouse;break;case"touch":s=yd.Touch;break;case"pen":s=yd.Pen}s===yd.Touch?vd[t]===vd.MouseDown?l="TouchStart":vd[t]===vd.MouseUp&&(l="TouchEnd"):yd.Pen}else ql(i)&&(s=yd.Touch);null!==s?(c=s,(l.startsWith("Touch")&&s===yd.Touch||l.startsWith("Mouse")&&s===yd.Mouse)&&(s=null)):vd[t]===vd.Click&&(s=c,c=null);const d=ql(i)?i.changedTouches[0]:i;if(!d)return;const u=n.getId(a),{clientX:h,clientY:p}=d;_d(e)(Object.assign({type:vd[l],id:u,x:h,y:p},null!==s&&{pointerType:s}))})(i);if(window.PointerEvent)switch(vd[i]){case vd.MouseDown:case vd.MouseUp:a=a.replace("mouse","pointer");break;case vd.TouchStart:case vd.TouchEnd:return}s.push(Pl(a,l,t))})),_d((()=>{s.forEach((e=>e()))}))}function Pd({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:i}){return Pl("scroll",_d(Vl(_d((i=>{const a=Ld(i);if(!a||zl(a,r,o,!0))return;const s=n.getId(a);if(a===t&&t.defaultView){const n=Zl(t.defaultView);e({id:s,x:n.left,y:n.top})}else e({id:s,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),t)}function Ud(e,t){const n=Object.assign({},e);return t||delete n.userTriggered,n}const Wd=["INPUT","TEXTAREA","SELECT"],Vd=new WeakMap;function Gd(e){return function(e,t){if(Hd("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Hd("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Hd("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Hd("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function jd(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Yd({mirror:e,stylesheetManager:t},n){var r,o,i;let a=null;a="#document"===n.nodeName?e.getId(n):e.getId(n.host);const s="#document"===n.nodeName?null===(r=n.defaultView)||void 0===r?void 0:r.Document:null===(i=null===(o=n.ownerDocument)||void 0===o?void 0:o.defaultView)||void 0===i?void 0:i.ShadowRoot,c=Object.getOwnPropertyDescriptor(null==s?void 0:s.prototype,"adoptedStyleSheets");return null!==a&&-1!==a&&s&&c?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var e;return null===(e=c.get)||void 0===e?void 0:e.call(this)},set(e){var n;const r=null===(n=c.set)||void 0===n?void 0:n.call(this,e);if(null!==a&&-1!==a)try{t.adoptStyleSheets(e,a)}catch(e){}return r}}),_d((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}))):()=>{}}function Zd(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};!function(e,t){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:a,inputCb:s,mediaInteractionCb:c,styleSheetRuleCb:l,styleDeclarationCb:d,canvasMutationCb:u,fontCb:h,selectionCb:p}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),n(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),r(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),o(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),i(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),a(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),s(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),c(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),l(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),d(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),u(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),h(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),p(...e)}}(e,t);const r=Fd(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let a,s=[];const c=Vl(_d((t=>{const n=Date.now()-a;e(s.map((e=>(e.timeOffset-=n,e))),t),s=[],a=null})),i),l=_d(Vl(_d((e=>{const t=Ld(e),{clientX:n,clientY:o}=ql(e)?e.changedTouches[0]:e;a||(a=Yl()),s.push({x:n,y:o,id:r.getId(t),timeOffset:Yl()-a}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?gd.Drag:e instanceof MouseEvent?gd.MouseMove:gd.TouchMove)})),o,{trailing:!1})),d=[Pl("mousemove",l,n),Pl("touchmove",l,n),Pl("drag",l,n)];return _d((()=>{d.forEach((e=>e()))}))}(e),i=Bd(e),a=Pd(e),s=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Pl("resize",_d(Vl(_d((()=>{const t=Hl(),o=Kl();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=function({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,ignoreClass:i,ignoreSelector:a,maskInputOptions:s,maskInputFn:c,sampling:l,userTriggeredOnInput:d}){function u(e){let n=Ld(e);const l=e.isTrusted,u=n&&n.tagName;if(n&&"OPTION"===u&&(n=n.parentElement),!n||!u||Wd.indexOf(u)<0||zl(n,r,o,!0))return;if(n.classList.contains(i)||a&&n.matches(a))return;let p=n.value,m=!1;const f=nl(n)||"";"radio"===f||"checkbox"===f?m=n.checked:(s[u.toLowerCase()]||s[f])&&(p=$c({element:n,maskInputOptions:s,tagName:u,type:f,value:p,maskInputFn:c})),h(n,_d(Ud)({text:p,isChecked:m,userTriggered:l},d));const g=n.name;"radio"===f&&g&&m&&t.querySelectorAll(`input[type="radio"][name="${g}"]`).forEach((e=>{e!==n&&h(e,_d(Ud)({text:e.value,isChecked:!m,userTriggered:!1},d))}))}function h(t,r){const o=Vd.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Vd.set(t,r);const o=n.getId(t);_d(e)(Object.assign(Object.assign({},r),{id:o}))}}const p=("last"===l.input?["change"]:["input","change"]).map((e=>Pl(e,_d(u),t))),m=t.defaultView;if(!m)return()=>{p.forEach((e=>e()))};const f=m.Object.getOwnPropertyDescriptor(m.HTMLInputElement.prototype,"value"),g=[[m.HTMLInputElement.prototype,"value"],[m.HTMLInputElement.prototype,"checked"],[m.HTMLSelectElement.prototype,"value"],[m.HTMLTextAreaElement.prototype,"value"],[m.HTMLSelectElement.prototype,"selectedIndex"],[m.HTMLOptionElement.prototype,"selected"]];return f&&f.set&&p.push(...g.map((e=>Gl(e[0],e[1],{set(){_d(u)({target:this,isTrusted:!1})}},!1,m)))),_d((()=>{p.forEach((e=>e()))}))}(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,mirror:r,sampling:o,doc:i}){const a=_d((i=>Vl(_d((o=>{const a=Ld(o);if(!a||zl(a,t,n,!0))return;const{currentTime:s,volume:c,muted:l,playbackRate:d}=a;e({type:i,id:r.getId(a),currentTime:s,volume:c,muted:l,playbackRate:d})})),o.media||500))),s=[Pl("play",a(0),i),Pl("pause",a(1),i),Pl("seeked",a(2),i),Pl("volumechange",a(3),i),Pl("ratechange",a(4),i)];return _d((()=>{s.forEach((e=>e()))}))}(e),d=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:_d(((r,o,i)=>{const[a,s]=i,{id:c,styleId:l}=jd(o,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:a,index:s}]}),r.apply(o,i)}))});const i=r.CSSStyleSheet.prototype.deleteRule;let a,s;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:_d(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=jd(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,removes:[{index:a}]}),r.apply(o,i)}))}),r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:_d(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=jd(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,replace:a}),r.apply(o,i)}))})),r.CSSStyleSheet.prototype.replaceSync&&(s=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(s,{apply:_d(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=jd(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,replaceSync:a}),r.apply(o,i)}))}));const c={};Kd("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Kd("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Kd("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Kd("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach((([r,o])=>{l[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(l[r].insertRule,{apply:_d(((r,o,i)=>{const[a,s]=i,{id:c,styleId:l}=jd(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:a,index:[...Gd(o),s||0]}]}),r.apply(o,i)}))}),o.prototype.deleteRule=new Proxy(l[r].deleteRule,{apply:_d(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=jd(o.parentStyleSheet,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,removes:[{index:[...Gd(o),a]}]}),r.apply(o,i)}))})})),_d((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,a&&(r.CSSStyleSheet.prototype.replace=a),s&&(r.CSSStyleSheet.prototype.replaceSync=s),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule}))}))}(e,{win:n}),u=Yd(e,e.doc),h=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:_d(((o,a,s)=>{var c;const[l,d,u]=s;if(n.has(l))return i.apply(a,[l,d,u]);const{id:h,styleId:p}=jd(null===(c=a.parentRule)||void 0===c?void 0:c.parentStyleSheet,t,r.styleMirror);return(h&&-1!==h||p&&-1!==p)&&e({id:h,styleId:p,set:{property:l,value:d,priority:u},index:Gd(a.parentRule)}),o.apply(a,s)}))});const a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:_d(((o,i,s)=>{var c;const[l]=s;if(n.has(l))return a.apply(i,[l]);const{id:d,styleId:u}=jd(null===(c=i.parentRule)||void 0===c?void 0:c.parentStyleSheet,t,r.styleMirror);return(d&&-1!==d||u&&-1!==u)&&e({id:d,styleId:u,remove:{property:l},index:Gd(i.parentRule)}),o.apply(i,s)}))}),_d((()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=a}))}(e,{win:n}),p=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const r=new i(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const a=jl(t.fonts,"add",(function(t){return function(n){return setTimeout(_d((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=i})),r.push(a),_d((()=>{r.forEach((e=>e()))}))}(e):()=>{},m=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,selectionCb:i}=e;let a=!0;const s=_d((()=>{const e=t.getSelection();if(!e||a&&(null==e?void 0:e.isCollapsed))return;a=e.isCollapsed||!1;const s=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:c,endContainer:l,endOffset:d}=i;zl(a,r,o,!0)||zl(l,r,o,!0)||s.push({start:n.getId(a),startOffset:c,end:n.getId(l),endOffset:d})}i({ranges:s})}));return s(),Pl("selectionchange",s)}(e),f=[];for(const t of e.plugins)f.push(t.observer(t.callback,n,t.options));return _d((()=>{xd.forEach((e=>e.reset())),r.disconnect(),o(),i(),a(),s(),c(),l(),d(),u(),h(),p(),m(),f.forEach((e=>e()))}))}function Hd(e){return void 0!==window[e]}function Kd(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class zd{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let a=o.get(t);return a||(a=this.generateIdFn(),o.set(t,a),i.set(a,t)),a}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class Jd{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new zd(cl),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new zd(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){var n;switch(t.type){case fd.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:fd.IncrementalSnapshot,data:{source:gd.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case fd.Meta:case fd.Load:case fd.DomContentLoaded:return!1;case fd.Plugin:return t;case fd.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case fd.IncrementalSnapshot:switch(t.data.source){case gd.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case gd.Drag:case gd.TouchMove:case gd.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case gd.ViewportResize:return!1;case gd.MediaInteraction:case gd.MouseInteraction:case gd.Scroll:case gd.CanvasMutation:case gd.Input:return this.replaceIds(t.data,e,["id"]),t;case gd.StyleSheetRule:case gd.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case gd.Font:return t;case gd.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case gd.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null===(n=t.data.styles)||void 0===n||n.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Yc.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Xd{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!zc(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Fd(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Pd(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Yd({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(jl(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&pd(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function Qd(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}for(var qd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$d="undefined"==typeof Uint8Array?[]:new Uint8Array(256),eu=0;eu<64;eu++)$d[qd.charCodeAt(eu)]=eu;var tu=function(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),d=new Uint8Array(l);for(t=0;t<s;t+=4)n=$d[e.charCodeAt(t)],r=$d[e.charCodeAt(t+1)],o=$d[e.charCodeAt(t+2)],i=$d[e.charCodeAt(t+3)],d[c++]=n<<2|r>>4,d[c++]=(15&r)<<4|o>>2,d[c++]=(3&o)<<6|63&i;return l};const nu=new Map;const ru=(e,t,n)=>{if(!e||!au(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=nu.get(e);return n||(n=new Map,nu.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function ou(e,t,n){if(e instanceof Array)return e.map((e=>ou(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=qd[n[t]>>2],o+=qd[(3&n[t])<<4|n[t+1]>>4],o+=qd[(15&n[t+1])<<2|n[t+2]>>6],o+=qd[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[ou(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[ou(e.data,t,n),e.width,e.height]}}if(au(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:ru(e,t,n)}}return e}const iu=(e,t,n)=>[...e].map((e=>ou(e,t,n))),au=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function su(e,t,n,r){const o=[];try{const i=jl(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(o,...i){if(!zl(this,t,n,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(o);if("__context"in this||(this.__context=e),r&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[o,...i])}}));o.push(i)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach((e=>e()))}}function cu(e,t,n,r,o,i,a){const s=[],c=Object.getOwnPropertyNames(e);for(const i of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const c=jl(e,i,(function(e){return function(...s){const c=e.apply(this,s);if(ru(c,a,this),"tagName"in this.canvas&&!zl(this.canvas,r,o,!0)){const e=iu([...s],a,this),r={type:t,property:i,args:e};n(this.canvas,r)}return c}}));s.push(c)}catch(r){const o=Gl(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});s.push(o)}return s}function lu(e,t,n){var r=void 0===t?null:t,o=function(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),o=0,i=n.length;o<i;++o)r[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(e,void 0!==n&&n),i=o.indexOf("\n",10)+1,a=o.substring(i)+(r?"//# sourceMappingURL="+r:""),s=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(s)}var du,uu,hu,pu,mu=(du="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",uu=null,hu=!1,function(e){return pu=pu||lu(du,uu,hu),new Worker(pu,e)});class fu{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,recordCanvas:i,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,i&&"all"===t&&this.initCanvasMutationObserver(n,r,o),i&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,{dataURLOptions:a})}initCanvasFPSObserver(e,t,n,r,o){const i=su(t,n,r,!0),a=new Map,s=new mu;s.onmessage=e=>{const{id:t}=e.data;if(a.set(t,!1),!("base64"in e.data))return;const{base64:n,type:r,width:o,height:i}=e.data;this.mutationCb({id:t,type:Id["2D"],commands:[{property:"clearRect",args:[0,0,o,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:r}]},0,0]}]})};const c=1e3/e;let l,d=0;const u=e=>{d&&e-d<c||(d=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach((t=>{zl(t,n,r,!0)||e.push(t)})),e})().forEach((e=>Qd(this,void 0,void 0,(function*(){var t;const n=this.mirror.getId(e);if(a.get(n))return;if(a.set(n,!0),["webgl","webgl2"].includes(e.__context)){const n=e.getContext(e.__context);!1===(null===(t=null==n?void 0:n.getContextAttributes())||void 0===t?void 0:t.preserveDrawingBuffer)&&n.clear(n.COLOR_BUFFER_BIT)}const r=yield createImageBitmap(e);s.postMessage({id:n,bitmap:r,width:e.width,height:e.height,dataURLOptions:o.dataURLOptions},[r])}))))),l=requestAnimationFrame(u)};l=requestAnimationFrame(u),this.resetObservers=()=>{i(),cancelAnimationFrame(l)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=su(e,t,n,!1),o=function(e,t,n,r){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=jl(t.CanvasRenderingContext2D.prototype,a,(function(o){return function(...i){return zl(this.canvas,n,r,!0)||setTimeout((()=>{const n=iu([...i],t,this);e(this.canvas,{type:Id["2D"],property:a,args:n})}),0),o.apply(this,i)}}));o.push(i)}catch(n){const r=Gl(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:Id["2D"],property:a,args:[t],setter:!0})}});o.push(r)}return()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n),i=function(e,t,n,r,o){const i=[];return i.push(...cu(t.WebGLRenderingContext.prototype,Id.WebGL,e,n,r,0,t)),void 0!==t.WebGL2RenderingContext&&i.push(...cu(t.WebGL2RenderingContext.prototype,Id.WebGL2,e,n,r,0,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,this.mirror);this.resetObservers=()=>{r(),o(),i()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type"]);return t})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}class gu{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new ld,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;if(this.styleMirror.has(t))e=this.styleMirror.getId(t);else{e=this.styleMirror.add(t);const n=Array.from(t.rules||CSSRule);r.push({styleId:e,rules:n.map(((e,t)=>({rule:Xc(e),index:t})))})}n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class vu{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function yu(e){return Object.assign(Object.assign({},e),{timestamp:Yl()})}let Iu,Cu,Su,Eu=!1;const Tu=qc();function bu(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:s=null,maskTextClass:c="rr-mask",maskTextSelector:l=null,inlineStylesheet:d=!0,maskAllInputs:u,maskInputOptions:h,slimDOMOptions:p,maskInputFn:m,maskTextFn:f,hooks:g,packFn:v,sampling:y={},dataURLOptions:I={},mousemoveWait:C,recordCanvas:S=!1,recordCrossOriginIframes:E=!1,recordAfter:T=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:b=!1,collectFonts:w=!1,inlineImages:A=!1,plugins:N,keepIframeSrcFn:M=(()=>!1),ignoreCSSAttributes:D=new Set([]),errorHandler:O}=e;Rd(O);const R=!E||window.parent===window;let k=!1;if(!R)try{window.parent.document&&(k=!1)}catch(e){k=!0}if(R&&!t)throw new Error("emit function is required");void 0!==C&&void 0===y.mousemove&&(y.mousemove=C),Tu.reset();const _=!0===u?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==h?h:{password:!0},x=!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===p,headMetaDescKeywords:"all"===p}:p||{};let L;$l();let F=0;const B=e=>{for(const t of N||[])t.eventProcessor&&(e=t.eventProcessor(e));return v&&!k&&(e=v(e)),e};Iu=(e,o)=>{var i;if(!(null===(i=xd[0])||void 0===i?void 0:i.isFrozen())||e.type===fd.FullSnapshot||e.type===fd.IncrementalSnapshot&&e.data.source===gd.Mutation||xd.forEach((e=>e.unfreeze())),R)null==t||t(B(e),o);else if(k){const t={type:"rrweb",event:B(e),origin:window.location.origin,isCheckout:o};window.parent.postMessage(t,"*")}if(e.type===fd.FullSnapshot)L=e,F=0;else if(e.type===fd.IncrementalSnapshot){if(e.data.source===gd.Mutation&&e.data.isAttachIframe)return;F++;const t=r&&F>=r,o=n&&e.timestamp-L.timestamp>n;(t||o)&&Cu(!0)}};const P=e=>{Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.Mutation},e)}))},U=e=>Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.Scroll},e)})),W=e=>Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.CanvasMutation},e)})),V=new gu({mutationCb:P,adoptedStyleSheetCb:e=>Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.AdoptedStyleSheet},e)}))}),G=new Jd({mirror:Tu,mutationCb:P,stylesheetManager:V,recordCrossOriginIframes:E,wrappedEmit:Iu});for(const e of N||[])e.getMirror&&e.getMirror({nodeMirror:Tu,crossOriginIframeMirror:G.crossOriginIframeMirror,crossOriginIframeStyleMirror:G.crossOriginIframeStyleMirror});const j=new vu;Su=new fu({recordCanvas:S,mutationCb:W,win:window,blockClass:o,blockSelector:i,mirror:Tu,sampling:y.canvas,dataURLOptions:I});const Y=new Xd({mutationCb:P,scrollCb:U,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:l,inlineStylesheet:d,maskInputOptions:_,dataURLOptions:I,maskTextFn:f,maskInputFn:m,recordCanvas:S,inlineImages:A,sampling:y,slimDOMOptions:x,iframeManager:G,stylesheetManager:V,canvasManager:Su,keepIframeSrcFn:M,processedNodeManager:j},mirror:Tu});Cu=(e=!1)=>{Iu(yu({type:fd.Meta,data:{href:window.location.href,width:Kl(),height:Hl()}}),e),V.reset(),Y.init(),xd.forEach((e=>e.lock()));const t=function(e,t){var n=t||{},r=n.mirror,o=void 0===r?new Qc:r,i=n.blockClass,a=void 0===i?"rr-block":i,s=n.blockSelector,c=void 0===s?null:s,l=n.maskTextClass,d=void 0===l?"rr-mask":l,u=n.maskTextSelector,h=void 0===u?null:u,p=n.inlineStylesheet,m=void 0===p||p,f=n.inlineImages,g=void 0!==f&&f,v=n.recordCanvas,y=void 0!==v&&v,I=n.maskAllInputs,C=void 0!==I&&I,S=n.maskTextFn,E=n.maskInputFn,T=n.slimDOM,b=void 0!==T&&T,w=n.dataURLOptions,A=n.preserveWhiteSpace,N=n.onSerialize,M=n.onIframeLoad,D=n.iframeLoadTimeout,O=n.onStylesheetLoad,R=n.stylesheetLoadTimeout,k=n.keepIframeSrcFn;return wl(e,{doc:e,mirror:o,blockClass:a,blockSelector:c,maskTextClass:d,maskTextSelector:h,skipChild:!1,inlineStylesheet:m,maskInputOptions:!0===C?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===C?{password:!0}:C,maskTextFn:S,maskInputFn:E,slimDOMOptions:!0===b||"all"===b?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===b,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===b?{}:b,dataURLOptions:w,inlineImages:g,recordCanvas:y,preserveWhiteSpace:A,onSerialize:N,onIframeLoad:M,iframeLoadTimeout:D,onStylesheetLoad:O,stylesheetLoadTimeout:R,keepIframeSrcFn:void 0===k?function(){return!1}:k,newlyAddedElement:!1})}(document,{mirror:Tu,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:l,inlineStylesheet:d,maskAllInputs:_,maskTextFn:f,slimDOM:x,dataURLOptions:I,recordCanvas:S,inlineImages:A,onSerialize:e=>{nd(e,Tu)&&G.addIframe(e),rd(e,Tu)&&V.trackLinkElement(e),id(e)&&Y.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{G.attachIframe(e,t),Y.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{V.attachLinkElement(e,t)},keepIframeSrcFn:M});if(!t)return console.warn("Failed to snapshot the document");Iu(yu({type:fd.FullSnapshot,data:{node:t,initialOffset:Zl(window)}}),e),xd.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&V.adoptStyleSheets(document.adoptedStyleSheets,Tu.getId(document))};try{const e=[],t=e=>{var t;return _d(Zd)({mutationCb:P,mousemoveCb:(e,t)=>Iu(yu({type:fd.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.MouseInteraction},e)})),scrollCb:U,viewportResizeCb:e=>Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.ViewportResize},e)})),inputCb:e=>Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.Input},e)})),mediaInteractionCb:e=>Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.MediaInteraction},e)})),styleSheetRuleCb:e=>Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.StyleSheetRule},e)})),styleDeclarationCb:e=>Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.StyleDeclaration},e)})),canvasMutationCb:W,fontCb:e=>Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.Font},e)})),selectionCb:e=>{Iu(yu({type:fd.IncrementalSnapshot,data:Object.assign({source:gd.Selection},e)}))},blockClass:o,ignoreClass:a,ignoreSelector:s,maskTextClass:c,maskTextSelector:l,maskInputOptions:_,inlineStylesheet:d,sampling:y,recordCanvas:S,inlineImages:A,userTriggeredOnInput:b,collectFonts:w,doc:e,maskInputFn:m,maskTextFn:f,keepIframeSrcFn:M,blockSelector:i,slimDOMOptions:x,dataURLOptions:I,mirror:Tu,iframeManager:G,stylesheetManager:V,shadowDomManager:Y,processedNodeManager:j,canvasManager:Su,ignoreCSSAttributes:D,plugins:(null===(t=null==N?void 0:N.filter((e=>e.observer)))||void 0===t?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>Iu(yu({type:fd.Plugin,data:{plugin:e.name,payload:t}}))}))))||[]},g)};G.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Cu(),e.push(t(document)),Eu=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Pl("DOMContentLoaded",(()=>{Iu(yu({type:fd.DomContentLoaded,data:{}})),"DOMContentLoaded"===T&&n()}))),e.push(Pl("load",(()=>{Iu(yu({type:fd.Load,data:{}})),"load"===T&&n()}),window))),()=>{e.forEach((e=>e())),j.destroy(),Eu=!1,kd()}}catch(e){console.warn(e)}}var wu;bu.addCustomEvent=(e,t)=>{if(!Eu)throw new Error("please add custom event after start recording");Iu(yu({type:fd.Custom,data:{tag:e,payload:t}}))},bu.freezePage=()=>{xd.forEach((e=>e.freeze()))},bu.takeFullSnapshot=e=>{if(!Eu)throw new Error("please take full snapshot after start recording");Cu(e)},bu.mirror=Tu,function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(wu||(wu={}));var Au=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Nu(e){const t=[];for(const n in e){const r=e[n];if("string"!=typeof r)continue;const o=ku(n);t.push(`${o}: ${r};`)}return t.join(" ")}const Mu=/-([a-z])/g,Du=/^--[a-zA-Z0-9-]+$/,Ou=e=>Du.test(e)?e:e.replace(Mu,((e,t)=>t?t.toUpperCase():"")),Ru=/\B([A-Z])/g,ku=e=>e.replace(Ru,"-$1").toLowerCase();class _u{constructor(...e){this.parentElement=null,this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.ELEMENT_NODE=ju.ELEMENT_NODE,this.TEXT_NODE=ju.TEXT_NODE}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(!(e instanceof _u))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function xu(e){return class extends e{constructor(e,t,n){super(),this.nodeType=ju.DOCUMENT_TYPE_NODE,this.RRNodeType=wu.DocumentType,this.name=e,this.publicId=t,this.systemId=n,this.nodeName=e,this.textContent=null}toString(){return"RRDocumentType"}}}function Lu(e){return class extends e{constructor(e){super(),this.nodeType=ju.ELEMENT_NODE,this.RRNodeType=wu.Element,this.attributes={},this.shadowRoot=null,this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach((t=>e+=t.textContent)),e}set textContent(e){this.firstChild=null,this.lastChild=null,this.appendChild(this.ownerDocument.createTextNode(e))}get classList(){return new Uu(this.attributes.class,(e=>{this.attributes.class=e}))}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const e=this.attributes.style?function(e){const t={},n=/:(.+)/;return e.replace(/\/\*.*?\*\//g,"").split(/;(?![^(]*\))/g).forEach((function(e){if(e){const r=e.split(n);r.length>1&&(t[Ou(r[0].trim())]=r[1].trim())}})),t}(this.attributes.style):{},t=/\B([A-Z])/g;return e.setProperty=(n,r,o)=>{if(t.test(n))return;const i=Ou(n);r?e[i]=r:delete e[i],"important"===o&&(e[i]+=" !important"),this.attributes.style=Nu(e)},e.removeProperty=n=>{if(t.test(n))return"";const r=Ou(n),o=e[r]||"";return delete e[r],this.attributes.style=Nu(e),o},e}getAttribute(e){return this.attributes[e]||null}setAttribute(e,t){this.attributes[e]=t}setAttributeNS(e,t,n){this.setAttribute(t,n)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return Wu(this,e)}insertBefore(e,t){return Vu(this,e,t)}removeChild(e){return Gu(this,e)}attachShadow(e){const t=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=t,t}dispatchEvent(e){return!0}toString(){let e="";for(const t in this.attributes)e+=`${t}="${this.attributes[t]}" `;return`${this.tagName} ${e}`}}}function Fu(e){return class extends e{constructor(e){super(),this.nodeType=ju.TEXT_NODE,this.nodeName="#text",this.RRNodeType=wu.Text,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function Bu(e){return class extends e{constructor(e){super(),this.nodeType=ju.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=wu.Comment,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function Pu(e){return class extends e{constructor(e){super(),this.nodeName="#cdata-section",this.nodeType=ju.CDATA_SECTION_NODE,this.RRNodeType=wu.CDATA,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class Uu{constructor(e,t){if(this.classes=[],this.add=(...e)=>{for(const t of e){const e=String(t);this.classes.indexOf(e)>=0||this.classes.push(e)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...e)=>{this.classes=this.classes.filter((t=>-1===e.indexOf(t))),this.onChange&&this.onChange(this.classes.join(" "))},e){const t=e.trim().split(/\s+/);this.classes.push(...t)}this.onChange=t}}function Wu(e,t){return t.parentNode&&t.parentNode.removeChild(t),e.lastChild?(e.lastChild.nextSibling=t,t.previousSibling=e.lastChild):(e.firstChild=t,t.previousSibling=null),e.lastChild=t,t.nextSibling=null,t.parentNode=e,t.parentElement=e,t.ownerDocument=e.ownerDocument,t}function Vu(e,t,n){if(!n)return Wu(e,t);if(n.parentNode!==e)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return t===n||(t.parentNode&&t.parentNode.removeChild(t),t.previousSibling=n.previousSibling,n.previousSibling=t,t.nextSibling=n,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,t.parentElement=e,t.parentNode=e,t.ownerDocument=e.ownerDocument),t}function Gu(e,t){if(t.parentNode!==e)throw new Error("Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.");return t.previousSibling?t.previousSibling.nextSibling=t.nextSibling:e.firstChild=t.nextSibling,t.nextSibling?t.nextSibling.previousSibling=t.previousSibling:e.lastChild=t.previousSibling,t.previousSibling=null,t.nextSibling=null,t.parentElement=null,t.parentNode=null,t}var ju;!function(e){e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(ju||(ju={}));const Yu={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},Zu={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};let Hu=null;function Ku(e,t,n,r=t.mirror||t.ownerDocument.mirror){e=function(e,t,n,r){var o;n.afterAppend&&!Hu&&(Hu=new WeakSet,setTimeout((()=>{Hu=null}),0));if(!Xu(e,t)){const i=Ju(t,n.mirror,r);null===(o=e.parentNode)||void 0===o||o.replaceChild(i,e),e=i}switch(t.RRNodeType){case wu.Document:if(!Qu(e,t,n.mirror,r)){const o=r.getMeta(t);o&&(n.mirror.removeNodeFromMap(e),e.close(),e.open(),n.mirror.add(e,o),null==Hu||Hu.add(e))}break;case wu.Element:{const o=e,i=t;switch(i.tagName){case"IFRAME":{const o=e.contentDocument;if(!o)break;Ku(o,t.contentDocument,n,r);break}}i.shadowRoot&&(o.shadowRoot||o.attachShadow({mode:"open"}),zu(o.shadowRoot,i.shadowRoot,n,r));break}}return e}(e,t,n,r),zu(e,t,n,r),function(e,t,n,r){var o;switch(t.RRNodeType){case wu.Document:{const e=t.scrollData;e&&n.applyScroll(e,!0);break}case wu.Element:{const o=e,i=t;switch(function(e,t,n){const r=e.attributes,o=t.attributes;for(const r in o){const i=o[r],a=n.getMeta(t);if((null==a?void 0:a.isSVG)&&Yu[r])e.setAttributeNS(Yu[r],r,i);else if("CANVAS"===t.tagName&&"rr_dataURL"===r){const t=document.createElement("img");t.src=i,t.onload=()=>{const n=e.getContext("2d");n&&n.drawImage(t,0,0,t.width,t.height)}}else{if("IFRAME"===t.tagName&&"srcdoc"===r)continue;e.setAttribute(r,i)}}for(const{name:t}of Array.from(r))t in o||e.removeAttribute(t);t.scrollLeft&&(e.scrollLeft=t.scrollLeft),t.scrollTop&&(e.scrollTop=t.scrollTop)}(o,i,r),i.scrollData&&n.applyScroll(i.scrollData,!0),i.inputData&&n.applyInput(i.inputData),i.tagName){case"AUDIO":case"VIDEO":{const t=e,n=i;void 0!==n.paused&&(n.paused?t.pause():t.play()),void 0!==n.muted&&(t.muted=n.muted),void 0!==n.volume&&(t.volume=n.volume),void 0!==n.currentTime&&(t.currentTime=n.currentTime),void 0!==n.playbackRate&&(t.playbackRate=n.playbackRate);break}case"CANVAS":{const r=t;if(null!==r.rr_dataURL){const e=document.createElement("img");e.onload=()=>{const t=o.getContext("2d");t&&t.drawImage(e,0,0,e.width,e.height)},e.src=r.rr_dataURL}r.canvasMutations.forEach((t=>n.applyCanvas(t.event,t.mutation,e)));break}case"STYLE":{const e=o.sheet;e&&t.rules.forEach((t=>n.applyStyleSheetMutation(t,e)));break}}break}case wu.Text:case wu.Comment:case wu.CDATA:e.textContent!==t.data&&(e.textContent=t.data)}(null==Hu?void 0:Hu.has(e))&&(Hu.delete(e),null===(o=n.afterAppend)||void 0===o||o.call(n,e,n.mirror.getId(e)))}(e,t,n,r)}function zu(e,t,n,r){const o=Array.from(e.childNodes),i=t.childNodes;if(0===o.length&&0===i.length)return;let a,s,c=0,l=o.length-1,d=0,u=i.length-1,h=o[c],p=o[l],m=i[d],f=i[u];for(;c<=l&&d<=u;)if(void 0===h)h=o[++c];else if(void 0===p)p=o[--l];else if(Qu(h,m,n.mirror,r))h=o[++c],m=i[++d];else if(Qu(p,f,n.mirror,r))p=o[--l],f=i[--u];else if(Qu(h,f,n.mirror,r)){try{e.insertBefore(h,p.nextSibling)}catch(e){console.warn(e)}h=o[++c],f=i[--u]}else if(Qu(p,m,n.mirror,r)){try{e.insertBefore(p,h)}catch(e){console.warn(e)}p=o[--l],m=i[++d]}else{if(!a){a={};for(let e=c;e<=l;e++){const t=o[e];t&&n.mirror.hasNode(t)&&(a[n.mirror.getId(t)]=e)}}s=a[r.getId(m)];const t=o[s];if(void 0!==s&&t&&Qu(t,m,n.mirror,r)){try{e.insertBefore(t,h)}catch(e){console.warn(e)}o[s]=void 0}else{const t=Ju(m,n.mirror,r);"#document"===e.nodeName&&h&&(t.nodeType===t.DOCUMENT_TYPE_NODE&&h.nodeType===h.DOCUMENT_TYPE_NODE||t.nodeType===t.ELEMENT_NODE&&h.nodeType===h.ELEMENT_NODE)&&(e.removeChild(h),n.mirror.removeNodeFromMap(h),h=o[++c]);try{e.insertBefore(t,h||null)}catch(e){console.warn(e)}}m=i[++d]}if(c>l){const t=i[u+1];let o=null;for(t&&(o=n.mirror.getNode(r.getId(t)));d<=u;++d){const t=Ju(i[d],n.mirror,r);try{e.insertBefore(t,o)}catch(e){console.warn(e)}}}else if(d>u)for(;c<=l;c++){const t=o[c];if(t&&t.parentNode===e)try{e.removeChild(t),n.mirror.removeNodeFromMap(t)}catch(e){console.warn(e)}}let g=e.firstChild,v=t.firstChild;for(;null!==g&&null!==v;)Ku(g,v,n,r),g=g.nextSibling,v=v.nextSibling}function Ju(e,t,n){const r=n.getId(e),o=n.getMeta(e);let i=null;if(r>-1&&(i=t.getNode(r)),null!==i&&Xu(i,e))return i;switch(e.RRNodeType){case wu.Document:i=new Document;break;case wu.DocumentType:i=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case wu.Element:{let t=e.tagName.toLowerCase();t=Zu[t]||t,i=o&&"isSVG"in o&&(null==o?void 0:o.isSVG)?document.createElementNS(Yu.svg,t):document.createElement(e.tagName);break}case wu.Text:i=document.createTextNode(e.data);break;case wu.Comment:i=document.createComment(e.data);break;case wu.CDATA:i=document.createCDATASection(e.data)}o&&t.add(i,Object.assign({},o));try{null==Hu||Hu.add(i)}catch(e){}return i}function Xu(e,t){return e.nodeType===t.nodeType&&(e.nodeType!==e.ELEMENT_NODE||e.tagName.toUpperCase()===t.tagName)}function Qu(e,t,n,r){const o=n.getId(e),i=r.getId(t);return-1!==o&&o===i&&Xu(e,t)}class qu extends(function(e){return class t extends e{constructor(...e){super(e),this.nodeType=ju.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=wu.Document,this.textContent=null,this.ownerDocument=this}get documentElement(){return this.childNodes.find((e=>e.RRNodeType===wu.Element&&"HTML"===e.tagName))||null}get body(){var e;return(null===(e=this.documentElement)||void 0===e?void 0:e.childNodes.find((e=>e.RRNodeType===wu.Element&&"BODY"===e.tagName)))||null}get head(){var e;return(null===(e=this.documentElement)||void 0===e?void 0:e.childNodes.find((e=>e.RRNodeType===wu.Element&&"HEAD"===e.tagName)))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(e){const t=e.RRNodeType;if((t===wu.Element||t===wu.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===t)))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${t===wu.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const n=Wu(this,e);return n.parentElement=null,n}insertBefore(e,t){const n=e.RRNodeType;if((n===wu.Element||n===wu.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===n)))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${n===wu.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const r=Vu(this,e,t);return r.parentElement=null,r}removeChild(e){return Gu(this,e)}open(){this.firstChild=null,this.lastChild=null}close(){}write(e){let t;if('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'===e?t="-//W3C//DTD XHTML 1.0 Transitional//EN":'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'===e&&(t="-//W3C//DTD HTML 4.0 Transitional//EN"),t){const e=this.createDocumentType("html",t,"");this.open(),this.appendChild(e)}}createDocument(e,n,r){return new t}createDocumentType(e,t,n){const r=new(xu(_u))(e,t,n);return r.ownerDocument=this,r}createElement(e){const t=new(Lu(_u))(e);return t.ownerDocument=this,t}createElementNS(e,t){return this.createElement(t)}createTextNode(e){const t=new(Fu(_u))(e);return t.ownerDocument=this,t}createComment(e){const t=new(Bu(_u))(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new(Pu(_u))(e);return t.ownerDocument=this,t}toString(){return"RRDocument"}}}(_u)){get unserializedId(){return this._unserializedId--}constructor(e){super(),this.UNSERIALIZED_STARTING_ID=-2,this._unserializedId=this.UNSERIALIZED_STARTING_ID,this.mirror=new dh,this.scrollData=null,e&&(this.mirror=e)}createDocument(e,t,n){return new qu}createDocumentType(e,t,n){const r=new $u(e,t,n);return r.ownerDocument=this,r}createElement(e){const t=e.toUpperCase();let n;switch(t){case"AUDIO":case"VIDEO":n=new th(t);break;case"IFRAME":n=new oh(t,this.mirror);break;case"CANVAS":n=new nh(t);break;case"STYLE":n=new rh(t);break;default:n=new eh(t)}return n.ownerDocument=this,n}createComment(e){const t=new ah(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new sh(e);return t.ownerDocument=this,t}createTextNode(e){const t=new ih(e);return t.ownerDocument=this,t}destroyTree(){this.firstChild=null,this.lastChild=null,this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const $u=xu(_u);class eh extends(Lu(_u)){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class th extends(function(e){return class extends e{attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}(eh)){}class nh extends eh{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class rh extends eh{constructor(){super(...arguments),this.rules=[]}}class oh extends eh{constructor(e,t){super(e),this.contentDocument=new qu,this.contentDocument.mirror=t}}const ih=Fu(_u),ah=Bu(_u),sh=Pu(_u);function ch(e,t,n,r){let o;switch(e.nodeType){case ju.DOCUMENT_NODE:r&&"IFRAME"===r.nodeName?o=r.contentDocument:(o=t,o.compatMode=e.compatMode);break;case ju.DOCUMENT_TYPE_NODE:{const n=e;o=t.createDocumentType(n.name,n.publicId,n.systemId);break}case ju.ELEMENT_NODE:{const n=e,r=(i=n)instanceof HTMLFormElement?"FORM":i.tagName.toUpperCase();o=t.createElement(r);const a=o;for(const{name:e,value:t}of Array.from(n.attributes))a.attributes[e]=t;n.scrollLeft&&(a.scrollLeft=n.scrollLeft),n.scrollTop&&(a.scrollTop=n.scrollTop);break}case ju.TEXT_NODE:o=t.createTextNode(e.textContent||"");break;case ju.CDATA_SECTION_NODE:o=t.createCDATASection(e.data);break;case ju.COMMENT_NODE:o=t.createComment(e.textContent||"");break;case ju.DOCUMENT_FRAGMENT_NODE:o=r.attachShadow({mode:"open"});break;default:return null}var i;let a=n.getMeta(e);return t instanceof qu&&(a||(a=uh(o,t.unserializedId),n.add(e,a)),t.mirror.add(o,Object.assign({},a))),o}function lh(e,t=function(){return new Au}(),n=new qu){return function e(r,o){const i=ch(r,n,t,o);if(null!==i)if("IFRAME"!==(null==o?void 0:o.nodeName)&&r.nodeType!==ju.DOCUMENT_FRAGMENT_NODE&&(null==o||o.appendChild(i),i.parentNode=o,i.parentElement=o),"IFRAME"===r.nodeName){const t=r.contentDocument;t&&e(t,i)}else r.nodeType!==ju.DOCUMENT_NODE&&r.nodeType!==ju.ELEMENT_NODE&&r.nodeType!==ju.DOCUMENT_FRAGMENT_NODE||(r.nodeType===ju.ELEMENT_NODE&&r.shadowRoot&&e(r.shadowRoot,i),r.childNodes.forEach((t=>e(t,i))))}(e,null),n}class dh{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var t;if(!e)return-1;const n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function uh(e,t){switch(e.RRNodeType){case wu.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case wu.DocumentType:{const n=e;return{id:t,type:e.RRNodeType,name:n.name,publicId:n.publicId,systemId:n.systemId}}case wu.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case wu.Text:case wu.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case wu.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}const{addCustomEvent:hh}=bu,{freezePage:ph}=bu;var mh=Uint8Array,fh=Uint16Array,gh=Uint32Array,vh=new mh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yh=new mh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ih=new mh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ch=function(e,t){for(var n=new fh(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new gh(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return[n,o]},Sh=Ch(vh,2),Eh=Sh[0],Th=Sh[1];Eh[28]=258,Th[258]=28;for(var bh=Ch(yh,0),wh=bh[0],Ah=bh[1],Nh=new fh(32768),Mh=0;Mh<32768;++Mh){var Dh=(43690&Mh)>>>1|(21845&Mh)<<1;Dh=(61680&(Dh=(52428&Dh)>>>2|(13107&Dh)<<2))>>>4|(3855&Dh)<<4,Nh[Mh]=((65280&Dh)>>>8|(255&Dh)<<8)>>>1}var Oh=function(e,t,n){for(var r=e.length,o=0,i=new fh(t);o<r;++o)++i[e[o]-1];var a,s=new fh(t);for(o=0;o<t;++o)s[o]=s[o-1]+i[o-1]<<1;if(n){a=new fh(1<<t);var c=15-t;for(o=0;o<r;++o)if(e[o])for(var l=o<<4|e[o],d=t-e[o],u=s[e[o]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)a[Nh[u]>>>c]=l}else for(a=new fh(r),o=0;o<r;++o)a[o]=Nh[s[e[o]-1]++]>>>15-e[o];return a},Rh=new mh(288);for(Mh=0;Mh<144;++Mh)Rh[Mh]=8;for(Mh=144;Mh<256;++Mh)Rh[Mh]=9;for(Mh=256;Mh<280;++Mh)Rh[Mh]=7;for(Mh=280;Mh<288;++Mh)Rh[Mh]=8;var kh=new mh(32);for(Mh=0;Mh<32;++Mh)kh[Mh]=5;var _h=Oh(Rh,9,0),xh=Oh(Rh,9,1),Lh=Oh(kh,5,0),Fh=Oh(kh,5,1),Bh=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Ph=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>>(7&t)&n},Uh=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>>(7&t)},Wh=function(e){return(e/8|0)+(7&e&&1)},Vh=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof fh?fh:e instanceof gh?gh:mh)(n-t);return r.set(e.subarray(t,n)),r},Gh=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},jh=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Yh=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,i=n.slice();if(!o)return[new mh(0),0];if(1==o){var a=new mh(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],c=n[1],l=0,d=1,u=2;for(n[0]={s:-1,f:s.f+c.f,l:s,r:c};d!=o-1;)s=n[n[l].f<n[u].f?l++:u++],c=n[l!=d&&n[l].f<n[u].f?l++:u++],n[d++]={s:-1,f:s.f+c.f,l:s,r:c};var h=i[0].s;for(r=1;r<o;++r)i[r].s>h&&(h=i[r].s);var p=new fh(h+1),m=Zh(n[d-1],p,0);if(m>t){r=0;var f=0,g=m-t,v=1<<g;for(i.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));r<o;++r){var y=i[r].s;if(!(p[y]>t))break;f+=v-(1<<m-p[y]),p[y]=t}for(f>>>=g;f>0;){var I=i[r].s;p[I]<t?f-=1<<t-p[I]++-1:++r}for(;r>=0&&f;--r){var C=i[r].s;p[C]==t&&(--p[C],++f)}m=t}return[new mh(p),m]},Zh=function(e,t,n){return-1==e.s?Math.max(Zh(e.l,t,n+1),Zh(e.r,t,n+1)):t[e.s]=n},Hh=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new fh(++t),r=0,o=e[0],i=1,a=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==o&&s!=t)++i;else{if(!o&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(o),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(o);i=1,o=e[s]}return[n.subarray(0,r),t]},Kh=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},zh=function(e,t,n){var r=n.length,o=Wh(t+2);e[o]=255&r,e[o+1]=r>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var i=0;i<r;++i)e[o+i+4]=n[i];return 8*(o+4+r)},Jh=function(e,t,n,r,o,i,a,s,c,l,d){Gh(t,d++,n),++o[256];for(var u=Yh(o,15),h=u[0],p=u[1],m=Yh(i,15),f=m[0],g=m[1],v=Hh(h),y=v[0],I=v[1],C=Hh(f),S=C[0],E=C[1],T=new fh(19),b=0;b<y.length;++b)T[31&y[b]]++;for(b=0;b<S.length;++b)T[31&S[b]]++;for(var w=Yh(T,7),A=w[0],N=w[1],M=19;M>4&&!A[Ih[M-1]];--M);var D,O,R,k,_=l+5<<3,x=Kh(o,Rh)+Kh(i,kh)+a,L=Kh(o,h)+Kh(i,f)+a+14+3*M+Kh(T,A)+(2*T[16]+3*T[17]+7*T[18]);if(_<=x&&_<=L)return zh(t,d,e.subarray(c,c+l));if(Gh(t,d,1+(L<x)),d+=2,L<x){D=Oh(h,p,0),O=h,R=Oh(f,g,0),k=f;var F=Oh(A,N,0);Gh(t,d,I-257),Gh(t,d+5,E-1),Gh(t,d+10,M-4),d+=14;for(b=0;b<M;++b)Gh(t,d+3*b,A[Ih[b]]);d+=3*M;for(var B=[y,S],P=0;P<2;++P){var U=B[P];for(b=0;b<U.length;++b){var W=31&U[b];Gh(t,d,F[W]),d+=A[W],W>15&&(Gh(t,d,U[b]>>>5&127),d+=U[b]>>>12)}}}else D=_h,O=Rh,R=Lh,k=kh;for(b=0;b<s;++b)if(r[b]>255){W=r[b]>>>18&31;jh(t,d,D[W+257]),d+=O[W+257],W>7&&(Gh(t,d,r[b]>>>23&31),d+=vh[W]);var V=31&r[b];jh(t,d,R[V]),d+=k[V],V>3&&(jh(t,d,r[b]>>>5&8191),d+=yh[V])}else jh(t,d,D[r[b]]),d+=O[r[b]];return jh(t,d,D[256]),d+O[256]},Xh=new gh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Qh=new mh(0),qh=function(e,t,n,r,o){return function(e,t,n,r,o,i){var a=e.length,s=new mh(r+a+5*(1+Math.floor(a/7e3))+o),c=s.subarray(r,s.length-o),l=0;if(!t||a<8)for(var d=0;d<=a;d+=65535){var u=d+65535;u<a?l=zh(c,l,e.subarray(d,u)):(c[d]=i,l=zh(c,l,e.subarray(d,a)))}else{for(var h=Xh[t-1],p=h>>>13,m=8191&h,f=(1<<n)-1,g=new fh(32768),v=new fh(f+1),y=Math.ceil(n/3),I=2*y,C=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<I)&f},S=new gh(25e3),E=new fh(288),T=new fh(32),b=0,w=0,A=(d=0,0),N=0,M=0;d<a;++d){var D=C(d),O=32767&d,R=v[D];if(g[O]=R,v[D]=O,N<=d){var k=a-d;if((b>7e3||A>24576)&&k>423){l=Jh(e,c,0,S,E,T,w,A,M,d-M,l),A=b=w=0,M=d;for(var _=0;_<286;++_)E[_]=0;for(_=0;_<30;++_)T[_]=0}var x=2,L=0,F=m,B=O-R&32767;if(k>2&&D==C(d-B))for(var P=Math.min(p,k)-1,U=Math.min(32767,d),W=Math.min(258,k);B<=U&&--F&&O!=R;){if(e[d+x]==e[d+x-B]){for(var V=0;V<W&&e[d+V]==e[d+V-B];++V);if(V>x){if(x=V,L=B,V>P)break;var G=Math.min(B,V-2),j=0;for(_=0;_<G;++_){var Y=d-B+_+32768&32767,Z=Y-g[Y]+32768&32767;Z>j&&(j=Z,R=Y)}}}B+=(O=R)-(R=g[O])+32768&32767}if(L){S[A++]=268435456|Th[x]<<18|Ah[L];var H=31&Th[x],K=31&Ah[L];w+=vh[H]+yh[K],++E[257+H],++T[K],N=d+x,++b}else S[A++]=e[d],++E[e[d]]}}l=Jh(e,c,i,S,E,T,w,A,M,d-M,l),i||(l=zh(c,l,Qh))}return Vh(s,0,r+Wh(l)+o)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!o)};function $h(e,t){void 0===t&&(t={});var n=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,i=n.length,a=0;a!=i;){for(var s=Math.min(a+5552,i);a<s;++a)o+=r+=n[a];r%=65521,o%=65521}e=r,t=o},d:function(){return(e>>>8<<16|(255&t)<<8|t>>>8)+2*((255&e)<<23)}}}();n.p(e);var r=qh(e,t,2,4);return function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)}(r,t),function(e,t,n){for(;n;++t)e[t]=n,n>>>=8}(r,r.length-4,n.d()),r}function ep(e,t){return function(e,t,n){var r=e.length,o=!t||n,i=!n||n.i;n||(n={}),t||(t=new mh(3*r));var a=function(e){var n=t.length;if(e>n){var r=new mh(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,c=n.p||0,l=n.b||0,d=n.l,u=n.d,h=n.m,p=n.n,m=8*r;do{if(!d){n.f=s=Ph(e,c,1);var f=Ph(e,c+1,3);if(c+=3,!f){var g=e[(N=Wh(c)+4)-4]|e[N-3]<<8,v=N+g;if(v>r){if(i)throw"unexpected EOF";break}o&&a(l+g),t.set(e.subarray(N,v),l),n.b=l+=g,n.p=c=8*v;continue}if(1==f)d=xh,u=Fh,h=9,p=5;else{if(2!=f)throw"invalid block type";var y=Ph(e,c,31)+257,I=Ph(e,c+10,15)+4,C=y+Ph(e,c+5,31)+1;c+=14;for(var S=new mh(C),E=new mh(19),T=0;T<I;++T)E[Ih[T]]=Ph(e,c+3*T,7);c+=3*I;var b=Bh(E),w=(1<<b)-1;if(!i&&c+C*(b+7)>m)break;var A=Oh(E,b,1);for(T=0;T<C;){var N,M=A[Ph(e,c,w)];if(c+=15&M,(N=M>>>4)<16)S[T++]=N;else{var D=0,O=0;for(16==N?(O=3+Ph(e,c,3),c+=2,D=S[T-1]):17==N?(O=3+Ph(e,c,7),c+=3):18==N&&(O=11+Ph(e,c,127),c+=7);O--;)S[T++]=D}}var R=S.subarray(0,y),k=S.subarray(y);h=Bh(R),p=Bh(k),d=Oh(R,h,1),u=Oh(k,p,1)}if(c>m)throw"unexpected EOF"}o&&a(l+131072);for(var _=(1<<h)-1,x=(1<<p)-1,L=h+p+18;i||c+L<m;){var F=(D=d[Uh(e,c)&_])>>>4;if((c+=15&D)>m)throw"unexpected EOF";if(!D)throw"invalid length/literal";if(F<256)t[l++]=F;else{if(256==F){d=null;break}var B=F-254;if(F>264){var P=vh[T=F-257];B=Ph(e,c,(1<<P)-1)+Eh[T],c+=P}var U=u[Uh(e,c)&x],W=U>>>4;if(!U)throw"invalid distance";if(c+=15&U,k=wh[W],W>3&&(P=yh[W],k+=Uh(e,c)&(1<<P)-1,c+=P),c>m)throw"unexpected EOF";o&&a(l+131072);for(var V=l+B;l<V;l+=4)t[l]=t[l-k],t[l+1]=t[l+1-k],t[l+2]=t[l+2-k],t[l+3]=t[l+3-k];l=V}}n.l=d,n.p=c,n.b=l,d&&(s=1,n.m=h,n.d=u,n.n=p)}while(!s);return l==t.length?t:Vh(t,0,l)}((function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"}(e),e.subarray(2,-4)),t)}function tp(e,t){var n=e.length;if(!t&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new mh(e.length+(e.length>>>1)),o=0,i=function(e){r[o++]=e},a=0;a<n;++a){if(o+5>r.length){var s=new mh(o+8+(n-a<<1));s.set(r),r=s}var c=e.charCodeAt(a);c<128||t?i(c):c<2048?(i(192|c>>>6),i(128|63&c)):c>55295&&c<57344?(i(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++a))>>>18),i(128|c>>>12&63),i(128|c>>>6&63),i(128|63&c)):(i(224|c>>>12),i(128|c>>>6&63),i(128|63&c))}return Vh(r,0,o)}function np(e,t){var n="";if(!t&&"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var r=0;r<e.length;){var o=e[r++];o<128||t?n+=String.fromCharCode(o):o<224?n+=String.fromCharCode((31&o)<<6|63&e[r++]):o<240?n+=String.fromCharCode((15&o)<<12|(63&e[r++])<<6|63&e[r++]):(o=((15&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o))}return n}const rp="v1";class op{constructor(e){this.fileName=e.fileName||"",this.functionName=e.functionName||"",this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber}toString(){const e=this.lineNumber||"",t=this.columnNumber||"";return this.functionName?`${this.functionName} (${this.fileName}:${e}:${t})`:`${this.fileName}:${e}:${t}`}}const ip=/(^|@)\S+:\d+/,ap=/^\s*at .*(\S+:\d+|\(native\))/m,sp=/^(eval@)?(\[native code])?$/,cp={parse:function(e){return e?void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(ap)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):(console.warn("[console-record-plugin]: Failed to parse error object:",e),[]):[]},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];const t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));if(!t)throw new Error(`Cannot parse given url: ${e}`);return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(ap)}),this).map((function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));let t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(");const n=t.match(/ (\((.+):(\d+):(\d+)\)$)/);t=n?t.replace(n[0],""):t;const r=t.split(/\s+/).slice(1),o=this.extractLocation(n?n[1]:r.pop()),i=r.join(" ")||void 0,a=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new op({functionName:i,fileName:a,lineNumber:o[1],columnNumber:o[2]})}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(sp)}),this).map((function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new op({functionName:e});{const t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),r=n&&n[1]?n[1]:void 0,o=this.extractLocation(e.replace(t,""));return new op({functionName:r,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})}}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){const t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[];for(let e=2,o=n.length;e<o;e+=2){const o=t.exec(n[e]);o&&r.push(new op({fileName:o[2],lineNumber:parseFloat(o[1])}))}return r},parseOpera10:function(e){const t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[];for(let e=0,o=n.length;e<o;e+=2){const o=t.exec(n[e]);o&&r.push(new op({functionName:o[3]||void 0,fileName:o[2],lineNumber:parseFloat(o[1])}))}return r},parseOpera11:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(ip)&&!e.match(/^Error created at/)}),this).map((function(e){const t=e.split("@"),n=this.extractLocation(t.pop()),r=(t.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new op({functionName:r,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})}),this)}};function lp(e){if(!e||!e.outerHTML)return"";let t="";for(;e.parentElement;){let n=e.localName;if(!n)break;n=n.toLowerCase();const r=e.parentElement,o=[];if(r.children&&r.children.length>0)for(let e=0;e<r.children.length;e++){const t=r.children[e];t.localName&&t.localName.toLowerCase&&t.localName.toLowerCase()===n&&o.push(t)}o.length>1&&(n+=`:eq(${o.indexOf(e)})`),t=n+(t?">"+t:""),e=r}return t}function dp(e){return"[object Object]"===Object.prototype.toString.call(e)}function up(e,t){if(0===t)return!0;const n=Object.keys(e);for(const r of n)if(dp(e[r])&&up(e[r],t-1))return!0;return!1}function hp(e,t){const n={numOfKeysLimit:50,depthOfLimit:4};Object.assign(n,t);const r=[],o=[];return JSON.stringify(e,(function(e,t){if(r.length>0){const n=r.indexOf(this);~n?r.splice(n+1):r.push(this),~n?o.splice(n,1/0,e):o.push(e),~r.indexOf(t)&&(t=r[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,r.indexOf(t)).join(".")+"]")}else r.push(t);if(null===t)return t;if(void 0===t)return"undefined";if(function(e){if(dp(e)&&Object.keys(e).length>n.numOfKeysLimit)return!0;if("function"==typeof e)return!0;if(dp(e)&&up(e,n.depthOfLimit))return!0;return!1}(t))return function(e){let t=e.toString();n.stringLengthLimit&&t.length>n.stringLengthLimit&&(t=`${t.slice(0,n.stringLengthLimit)}...`);return t}(t);if(t instanceof Event){const e={};for(const n in t){const r=t[n];Array.isArray(r)?e[n]=lp(r.length?r[0]:null):e[n]=r}return e}return t instanceof Node?t instanceof HTMLElement?t?t.outerHTML:"":t.nodeName:t instanceof Error?t.stack?t.stack+"\nEnd of stack for Error object":t.name+": "+t.message:t}))}const pp={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function mp(e,t,n){const r=n?Object.assign({},pp,n):pp,o=r.logger;if(!o)return()=>{};let i;i="string"==typeof o?t[o]:o;let a=0,s=!1;const c=[];if(r.level.includes("error")){const n=t=>{const n=t.message,o=t.error,i=cp.parse(o).map((e=>e.toString())),a=[hp(n,r.stringifyOptions)];e({level:"error",trace:i,payload:a})};t.addEventListener("error",n),c.push((()=>{t.removeEventListener("error",n)}));const o=t=>{let n,o;t.reason instanceof Error?(n=t.reason,o=[hp(`Uncaught (in promise) ${n.name}: ${n.message}`,r.stringifyOptions)]):(n=new Error,o=[hp("Uncaught (in promise)",r.stringifyOptions),hp(t.reason,r.stringifyOptions)]);const i=cp.parse(n).map((e=>e.toString()));e({level:"error",trace:i,payload:o})};t.addEventListener("unhandledrejection",o),c.push((()=>{t.removeEventListener("unhandledrejection",o)}))}for(const e of r.level)c.push(l(i,e));return()=>{c.forEach((e=>e()))};function l(t,n){return t[n]?jl(t,n,(t=>(...o)=>{if(t.apply(this,o),!s){s=!0;try{const t=cp.parse(new Error).map((e=>e.toString())).splice(1),i=o.map((e=>hp(e,r.stringifyOptions)));a++,a<r.lengthThreshold?e({level:n,trace:t,payload:i}):a===r.lengthThreshold&&e({level:"warn",trace:[],payload:[hp("The number of log records reached the threshold.")]})}catch(e){t("rrweb logger error:",e,...o)}finally{s=!1}}})):()=>{}}}const fp="rrweb/console@1",gp="__rrweb_original__",vp={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],replayLogger:void 0};class yp{constructor(e){this.config=Object.assign(vp,e)}getConsoleLogger(){const e={};for(const t of this.config.level)e[t]="trace"===t?e=>{(console.log[gp]?console.log[gp]:console.log)(...e.payload.map((e=>JSON.parse(e))),this.formatMessage(e))}:e=>{(console[t][gp]?console[t][gp]:console[t])(...e.payload.map((e=>JSON.parse(e))),this.formatMessage(e))};return e}formatMessage(e){if(0===e.trace.length)return"";const t="\n\tat ";let n=t;return n+=e.trace.join(t),n}}function Ip(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,n)}))}}}var Cp,Sp=Object.freeze({__proto__:null,default:Ip});function Ep(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&!0!==e.__forceSmoothScrollPolyfill__)return;const n=e.HTMLElement||e.Element,r=468,o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:n.prototype.scroll||c,scrollIntoView:n.prototype.scrollIntoView},i=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;const a=(s=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(s)?1:0);var s;function c(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function d(e,t){return"Y"===t?e.clientHeight+a<e.scrollHeight:"X"===t?e.clientWidth+a<e.scrollWidth:void 0}function u(t,n){const r=e.getComputedStyle(t,null)["overflow"+n];return"auto"===r||"scroll"===r}function h(e){const t=d(e,"Y")&&u(e,"Y"),n=d(e,"X")&&u(e,"X");return t||n}function p(t){let n,o,a,s=(i()-t.startTime)/r;s=s>1?1:s,n=function(e){return.5*(1-Math.cos(Math.PI*e))}(s),o=t.startX+(t.x-t.startX)*n,a=t.startY+(t.y-t.startY)*n,t.method.call(t.scrollable,o,a),o===t.x&&a===t.y||e.requestAnimationFrame(p.bind(e,t))}function m(n,r,a){let s,l,d,u;const h=i();n===t.body?(s=e,l=e.scrollX||e.pageXOffset,d=e.scrollY||e.pageYOffset,u=o.scroll):(s=n,l=n.scrollLeft,d=n.scrollTop,u=c),p({scrollable:s,method:u,startTime:h,startX:l,startY:d,x:r,y:a})}e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?m.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):o.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?o.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):m.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},n.prototype.scroll=n.prototype.scrollTo=function(){if(void 0===arguments[0])return;if(!0===l(arguments[0])){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");return void o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}const e=arguments[0].left,t=arguments[0].top;m.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)},n.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},n.prototype.scrollIntoView=function(){if(!0===l(arguments[0]))return void o.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]);const n=function(e){for(;e!==t.body&&!1===h(e);)e=e.parentNode||e.host;return e}(this),r=n.getBoundingClientRect(),i=this.getBoundingClientRect();n!==t.body?(m.call(this,n,n.scrollLeft+i.left-r.left,n.scrollTop+i.top-r.top),"fixed"!==e.getComputedStyle(n).position&&e.scrollBy({left:r.left,top:r.top,behavior:"smooth"})):e.scrollBy({left:i.left,top:i.top,behavior:"smooth"})}}class Tp{constructor(e=[],t){this.timeOffset=0,this.raf=null,this.actions=e,this.speed=t.speed}addAction(e){const t=!0===this.raf;if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)this.actions.push(e);else{const t=this.findActionIndex(e);this.actions.splice(t,0,e)}t&&(this.raf=requestAnimationFrame(this.rafCheck.bind(this)))}start(){this.timeOffset=0,this.lastTimestamp=performance.now(),this.raf=requestAnimationFrame(this.rafCheck.bind(this))}rafCheck(){const e=performance.now();for(this.timeOffset+=(e-this.lastTimestamp)*this.speed,this.lastTimestamp=e;this.actions.length;){const e=this.actions[0];if(!(this.timeOffset>=e.delay))break;this.actions.shift(),e.doAction()}this.actions.length>0?this.raf=requestAnimationFrame(this.rafCheck.bind(this)):this.raf=!0}clear(){this.raf&&(!0!==this.raf&&cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}isActive(){return null!==this.raf}findActionIndex(e){let t=0,n=this.actions.length-1;for(;t<=n;){const r=Math.floor((t+n)/2);if(this.actions[r].delay<e.delay)t=r+1;else{if(!(this.actions[r].delay>e.delay))return r+1;n=r-1}}return t}}function bp(e,t){if(e.type===fd.IncrementalSnapshot&&e.data.source===gd.MouseMove&&e.data.positions&&e.data.positions.length){const n=e.data.positions[0].timeOffset,r=e.timestamp+n;return e.delay=r-t,r-t}return e.delay=e.timestamp-t,e.delay}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function wp(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(Cp||(Cp={}));var Ap={type:"xstate.init"};function Np(e){return void 0===e?[]:[].concat(e)}function Mp(e){return{type:"xstate.assign",assignment:e}}function Dp(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function Op(e){return function(t){return e===t}}function Rp(e){return"string"==typeof e?{type:e}:e}function kp(e,t){return{value:e,context:t,actions:[],changed:!1,matches:Op(e)}}function _p(e,t,n){var r=t,o=!1;return[e.filter((function(e){if("xstate.assign"===e.type){o=!0;var t=Object.assign({},r);return"function"==typeof e.assignment?t=e.assignment(r,n):Object.keys(e.assignment).forEach((function(o){t[o]="function"==typeof e.assignment[o]?e.assignment[o](r,n):e.assignment[o]})),r=t,!1}return!0})),r,o]}function xp(e,t){void 0===t&&(t={});var n=wp(_p(Np(e.states[e.initial].entry).map((function(e){return Dp(e,t.actions)})),e.context,Ap),2),r=n[0],o=n[1],i={config:e,_options:t,initialState:{value:e.initial,actions:r,context:o,matches:Op(e.initial)},transition:function(t,n){var r,o,a="string"==typeof t?{value:t,context:e.context}:t,s=a.value,c=a.context,l=Rp(n),d=e.states[s];if(d.on){var u=Np(d.on[l.type]);try{for(var h=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(u),p=h.next();!p.done;p=h.next()){var m=p.value;if(void 0===m)return kp(s,c);var f="string"==typeof m?{target:m}:m,g=f.target,v=f.actions,y=void 0===v?[]:v,I=f.cond,C=void 0===I?function(){return!0}:I,S=void 0===g,E=null!=g?g:s,T=e.states[E];if(C(c,l)){var b=wp(_p((S?Np(y):[].concat(d.exit,y,T.entry).filter((function(e){return e}))).map((function(e){return Dp(e,i._options.actions)})),c,l),3),w=b[0],A=b[1],N=b[2],M=null!=g?g:s;return{value:M,context:A,actions:w,changed:g!==s||w.length>0||N,matches:Op(M)}}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}return kp(s,c)}};return i}var Lp=function(e,t){return e.actions.forEach((function(n){var r=n.exec;return r&&r(e.context,t)}))};function Fp(e){var t=e.initialState,n=Cp.NotStarted,r=new Set,o={_machine:e,send:function(o){n===Cp.Running&&(t=e.transition(t,o),Lp(t,Rp(o)),r.forEach((function(e){return e(t)})))},subscribe:function(e){return r.add(e),e(t),{unsubscribe:function(){return r.delete(e)}}},start:function(r){if(r){var i="object"==typeof r?r:{context:e.config.context,value:r};t={value:i.value,actions:[],context:i.context,matches:Op(i.value)}}return n=Cp.Running,Lp(t,Ap),o},stop:function(){return n=Cp.Stopped,r.clear(),o},get state(){return t},get status(){return n}};return o}function Bp(e,{getCastFn:t,applyEventsSynchronously:n,emitter:r}){const o=xp({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:Mp({lastPlayedEvent:(e,t)=>"CAST_EVENT"===t.type?t.payload.event:e.lastPlayedEvent}),recordTimeOffset:Mp(((e,t)=>{let n=e.timeOffset;return"payload"in t&&"timeOffset"in t.payload&&(n=t.payload.timeOffset),Object.assign(Object.assign({},e),{timeOffset:n,baselineTime:e.events[0].timestamp+n})})),play(e){var o;const{timer:i,events:a,baselineTime:s,lastPlayedEvent:c}=e;i.clear();for(const e of a)bp(e,s);const l=function(e,t){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.type===fd.Meta&&r.timestamp<=t)return e.slice(n)}return e}(a,s);let d=null==c?void 0:c.timestamp;(null==c?void 0:c.type)===fd.IncrementalSnapshot&&c.data.source===gd.MouseMove&&(d=c.timestamp+(null===(o=c.data.positions[0])||void 0===o?void 0:o.timeOffset)),s<(d||0)&&r.emit(Cd.PlayBack);const u=new Array;for(const e of l)if(!(d&&d<s&&(e.timestamp<=d||e===c)))if(e.timestamp<s)u.push(e);else{const n=t(e,!1);i.addAction({doAction:()=>{n()},delay:e.delay})}n(u),r.emit(Cd.Flush),i.start()},pause(e){e.timer.clear()},resetLastPlayedEvent:Mp((e=>Object.assign(Object.assign({},e),{lastPlayedEvent:null}))),startLive:Mp({baselineTime:(e,t)=>(e.timer.start(),"TO_LIVE"===t.type&&t.payload.baselineTime?t.payload.baselineTime:Date.now())}),addEvent:Mp(((e,n)=>{const{baselineTime:r,timer:o,events:i}=e;if("ADD_EVENT"===n.type){const{event:e}=n.payload;bp(e,r);let a=i.length-1;if(!i[a]||i[a].timestamp<=e.timestamp)i.push(e);else{let t=-1,n=0;for(;n<=a;){const t=Math.floor((n+a)/2);i[t].timestamp<=e.timestamp?n=t+1:a=t-1}-1===t&&(t=n),i.splice(t,0,e)}const s=e.timestamp<r,c=t(e,s);s?c():o.isActive()&&o.addAction({doAction:()=>{c()},delay:e.delay})}return Object.assign(Object.assign({},e),{events:i})}))}});return Fp(o)}const Pp=new Map;function Up(e,t){let n=Pp.get(e);return n||(n=new Map,Pp.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}function Wp(e,t,n){return r=>Qd(this,void 0,void 0,(function*(){if(r&&"object"==typeof r&&"rr_type"in r){if(n&&(n.isUnchanged=!1),"ImageBitmap"===r.rr_type&&"args"in r){const o=yield Wp(e,t,n)(r.args);return yield createImageBitmap.apply(null,o)}if("index"in r){if(n||null===t)return r;const{rr_type:e,index:o}=r;return Up(t,e)[o]}if("args"in r){const{rr_type:o,args:i}=r;return new(0,window[o])(...yield Promise.all(i.map(Wp(e,t,n))))}if("base64"in r)return tu(r.base64);if("src"in r){const t=e.get(r.src);if(t)return t;{const t=new Image;return t.src=r.src,e.set(r.src,t),t}}if("data"in r&&"Blob"===r.rr_type){const o=yield Promise.all(r.data.map(Wp(e,t,n)));return new Blob(o,{type:r.type})}}else if(Array.isArray(r)){return yield Promise.all(r.map(Wp(e,t,n)))}return r}))}const Vp=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function Gp({mutation:e,target:t,type:n,imageMap:r,errorHandler:o}){return Qd(this,void 0,void 0,(function*(){try{const o=function(e,t){try{return t===Id.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch(e){return null}}(t,n);if(!o)return;if(e.setter)return void(o[e.property]=e.args[0]);const i=o[e.property],a=yield Promise.all(e.args.map(Wp(r,o)));!function(e,t){if(!(null==t?void 0:t.constructor))return;const{name:n}=t.constructor;if(!Vp.includes(n))return;const r=Up(e,n);r.includes(t)||r.push(t)}(o,i.apply(o,a))}catch(t){o(e,t)}}))}function jp({event:e,mutation:t,target:n,imageMap:r,canvasEventMap:o,errorHandler:i}){return Qd(this,void 0,void 0,(function*(){try{const a=o.get(e)||t,s="commands"in a?a.commands:[a];if([Id.WebGL,Id.WebGL2].includes(t.type)){for(let e=0;e<s.length;e++){const o=s[e];yield Gp({mutation:o,type:t.type,target:n,imageMap:r,errorHandler:i})}return}yield function({event:e,mutations:t,target:n,imageMap:r,errorHandler:o}){return Qd(this,void 0,void 0,(function*(){const i=n.getContext("2d");if(!i)return void o(t[0],new Error("Canvas context is null"));const a=t.map((e=>Qd(this,void 0,void 0,(function*(){return Promise.all(e.args.map(Wp(r,i)))}))));(yield Promise.all(a)).forEach(((n,a)=>{const s=t[a];try{if(s.setter)return void(i[s.property]=s.args[0]);const t=i[s.property];"drawImage"===s.property&&"string"==typeof s.args[0]?(r.get(e),t.apply(i,s.args)):t.apply(i,n)}catch(e){o(s,e)}}))}))}({event:e,mutations:s,target:n,imageMap:r,errorHandler:i})}catch(e){i(t,e)}}))}const Yp=Ip||Sp,Zp="[replayer]",Hp={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function Kp(e){return e.type==fd.IncrementalSnapshot&&(e.data.source==gd.TouchMove||e.data.source==gd.MouseInteraction&&e.data.type==vd.TouchStart)}var zp=Object.freeze({__proto__:null,EventType:fd,IncrementalSource:gd,MouseInteractions:vd,PLUGIN_NAME:fp,Replayer:class{get timer(){return this.service.state.context.timer}constructor(e,t){if(this.usingVirtualDom=!1,this.virtualDom=new qu,this.mouseTail=null,this.tailPositions=[],this.emitter=Yp(),this.legacy_missingNodeRetryMap={},this.cache=xl(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=qc(),this.styleMirror=new ld,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastMouseDownEvent=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=e=>{this.iframe.style.display="inherit";for(const t of[this.mouseTail,this.iframe])t&&(t.setAttribute("width",String(e.width)),t.setAttribute("height",String(e.height)))},this.applyEventsSynchronously=e=>{for(const t of e){switch(t.type){case fd.DomContentLoaded:case fd.Load:case fd.Custom:continue;case fd.FullSnapshot:case fd.Meta:case fd.Plugin:case fd.IncrementalSnapshot:}this.getCastFn(t,!0)()}},this.getCastFn=(e,t=!1)=>{let n;switch(e.type){case fd.DomContentLoaded:case fd.Load:break;case fd.Custom:n=()=>{this.emitter.emit(Cd.CustomEvent,e)};break;case fd.Meta:n=()=>this.emitter.emit(Cd.Resize,{width:e.data.width,height:e.data.height});break;case fd.FullSnapshot:n=()=>{var n;if(this.firstFullSnapshot){if(this.firstFullSnapshot===e)return void(this.firstFullSnapshot=!0)}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(e,t),null===(n=this.iframe.contentWindow)||void 0===n||n.scrollTo(e.data.initialOffset),this.styleMirror.reset()};break;case fd.IncrementalSnapshot:n=()=>{if(this.applyIncremental(e,t),!t&&(e===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const t of this.service.state.context.events)if(!(t.timestamp<=e.timestamp)&&this.isUserInteraction(t)){t.delay-e.delay>1e4*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=t);break}if(this.nextUserInteractionEvent){const t=this.nextUserInteractionEvent.delay-e.delay,n={speed:Math.min(Math.round(t/5e3),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:n}),this.emitter.emit(Cd.SkipStart,n)}}}}return()=>{n&&n();for(const n of this.config.plugins||[])n.handler&&n.handler(e,t,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:e}});const r=this.service.state.context.events.length-1;if(!this.config.liveMode&&e===this.service.state.context.events[r]){const t=()=>{r<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(Cd.Finish))};let n=50;e.type===fd.IncrementalSnapshot&&e.data.source===gd.MouseMove&&e.data.positions.length&&(n+=Math.max(0,-e.data.positions[0].timeOffset)),setTimeout(t,n)}this.emitter.emit(Cd.EventCast,e)}},!(null==t?void 0:t.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");const n={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:Hp,useVirtualDom:!0,logger:console};this.config=Object.assign({},n,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(Cd.Resize,this.handleResize),this.setupDom();for(const e of this.config.plugins||[])e.getMirror&&e.getMirror({nodeMirror:this.mirror});this.emitter.on(Cd.Flush,(()=>{if(this.usingVirtualDom){const e={mirror:this.mirror,applyCanvas:(e,t,n)=>{jp({event:e,mutation:t,target:n,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(e,t)=>{e.source===gd.StyleSheetRule?this.applyStyleSheetRule(e,t):e.source===gd.StyleDeclaration&&this.applyStyleDeclaration(e,t)},afterAppend:(e,t)=>{for(const n of this.config.plugins||[])n.onBuild&&n.onBuild(e,{id:t,replayer:this})}};if(this.iframe.contentDocument)try{Ku(this.iframe.contentDocument,this.virtualDom,e,this.virtualDom.mirror)}catch(e){console.warn(e)}if(this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const t in this.legacy_missingNodeRetryMap)try{const n=this.legacy_missingNodeRetryMap[t],r=Ju(n.node,this.mirror,this.virtualDom.mirror);Ku(r,n.node,e,this.virtualDom.mirror),n.node=r}catch(e){this.warn(e)}this.constructedStyleMutations.forEach((e=>{this.applyStyleSheetMutation(e)})),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach((e=>{this.applyAdoptedStyleSheet(e)})),this.adoptedStyleSheets=[]}if(this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),!0===this.touchActive?this.mouse.classList.add("touch-active"):!1===this.touchActive&&this.mouse.classList.remove("touch-active"),this.touchActive=null,this.lastMouseDownEvent){const[e,t]=this.lastMouseDownEvent;e.dispatchEvent(t)}this.lastMouseDownEvent=null,this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)})),this.emitter.on(Cd.PlayBack,(()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset()}));const r=new Tp([],{speed:this.config.speed});this.service=Bp({events:e.map((e=>t&&t.unpackFn?t.unpackFn(e):e)).sort(((e,t)=>e.timestamp-t.timestamp)),timer:r,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe((e=>{this.emitter.emit(Cd.StateChange,{player:e})})),this.speedService=Fp(xp({id:"speed",context:{normalSpeed:-1,timer:r},initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(e,t)=>{"payload"in t&&e.timer.setSpeed(t.payload.speed)},recordSpeed:Mp({normalSpeed:e=>e.timer.speed}),restoreSpeed:e=>{e.timer.setSpeed(e.normalSpeed)}}})),this.speedService.start(),this.speedService.subscribe((e=>{this.emitter.emit(Cd.StateChange,{speed:e})}));const o=this.service.state.context.events.find((e=>e.type===fd.Meta)),i=this.service.state.context.events.find((e=>e.type===fd.FullSnapshot));if(o){const{width:e,height:t}=o.data;setTimeout((()=>{this.emitter.emit(Cd.Resize,{width:e,height:t})}),0)}i&&setTimeout((()=>{var e;this.firstFullSnapshot||(this.firstFullSnapshot=i,this.rebuildFullSnapshot(i),null===(e=this.iframe.contentWindow)||void 0===e||e.scrollTo(i.data.initialOffset))}),1),this.service.state.context.events.find(Kp)&&this.mouse.classList.add("touch-device")}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach((t=>{e[t],this.config[t]=e[t]})),this.config.skipInactive||this.backToNormal(),void 0!==e.speed&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),void 0!==e.mouseTail&&(!1===e.mouseTail?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,n;this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}}),null===(n=null===(t=this.iframe.contentDocument)||void 0===t?void 0:t.getElementsByTagName("html")[0])||void 0===n||n.classList.remove("rrweb-paused"),this.emitter.emit(Cd.Start)}pause(e){var t,n;void 0===e&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),"number"==typeof e&&(this.play(e),this.service.send({type:"PAUSE"})),null===(n=null===(t=this.iframe.contentDocument)||void 0===t?void 0:t.getElementsByTagName("html")[0])||void 0===n||n.classList.add("rrweb-paused"),this.emitter.emit(Cd.Pause)}resume(e=0){this.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(Cd.Resume)}destroy(){this.pause(),this.config.root.removeChild(this.wrapper),this.emitter.emit(Cd.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){const t=this.config.unpackFn?this.config.unpackFn(e):e;Kp(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then((()=>this.service.send({type:"ADD_EVENT",payload:{event:t}})))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=xl()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),!1!==this.config.mouseTail&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(Ep(this.iframe.contentWindow,this.iframe.contentDocument),$l(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&this.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const n=[],r=(e,t)=>{this.collectIframeAndAttachDocument(n,e);for(const n of this.config.plugins||[])n.onBuild&&n.onBuild(e,{id:t,replayer:this})};this.usingVirtualDom&&(this.virtualDom.destroyTree(),this.usingVirtualDom=!1),this.mirror.reset(),Bl(e.data.node,{doc:this.iframe.contentDocument,afterAppend:r,cache:this.cache,mirror:this.mirror}),r(this.iframe.contentDocument,e.data.node.id);for(const{mutationInQueue:e,builtNode:t}of n)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter((t=>t!==e));const{documentElement:o,head:i}=this.iframe.contentDocument;this.insertStyleRules(o,i),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(Cd.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var n;const r=(o=this.config.blockClass,[`.${o} { background: currentColor }`,"noscript { display: none !important; }"]).concat(this.config.insertStyleRules);var o;if(this.config.pauseAnimation&&r.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const n=this.virtualDom.createElement("style");this.virtualDom.mirror.add(n,uh(n,this.virtualDom.unserializedId)),e.insertBefore(n,t),n.rules.push({source:gd.StyleSheetRule,adds:r.map(((e,t)=>({rule:e,index:t})))})}else{const o=document.createElement("style");e.insertBefore(o,t);for(let e=0;e<r.length;e++)null===(n=o.sheet)||void 0===n||n.insertRule(r[e],e)}}attachDocumentToIframe(e,t){const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,r=[],o=(e,o)=>{this.collectIframeAndAttachDocument(r,e);const i=n.getMeta(e);if((null==i?void 0:i.type)===Yc.Element&&"HTML"===(null==i?void 0:i.tagName.toUpperCase())){const{documentElement:e,head:n}=t.contentDocument;this.insertStyleRules(e,n)}if(!this.usingVirtualDom)for(const t of this.config.plugins||[])t.onBuild&&t.onBuild(e,{id:o,replayer:this})};Fl(e.node,{doc:t.contentDocument,mirror:n,hackCss:!0,skipChild:!1,afterAppend:o,cache:this.cache}),o(t.contentDocument,e.node.id);for(const{mutationInQueue:e,builtNode:t}of r)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter((t=>t!==e))}collectIframeAndAttachDocument(e,t){if(nd(t,this.mirror)){const n=this.newDocumentQueue.find((e=>e.parentId===this.mirror.getId(t)));n&&e.push({mutationInQueue:n,builtNode:t})}}waitForStylesheetLoad(){var e;const t=null===(e=this.iframe.contentDocument)||void 0===e?void 0:e.head;if(t){const e=new Set;let n,r=this.service.state;const o=()=>{r=this.service.state};this.emitter.on(Cd.Start,o),this.emitter.on(Cd.Pause,o);const i=()=>{this.emitter.off(Cd.Start,o),this.emitter.off(Cd.Pause,o)};t.querySelectorAll('link[rel="stylesheet"]').forEach((t=>{t.sheet||(e.add(t),t.addEventListener("load",(()=>{e.delete(t),0===e.size&&-1!==n&&(r.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(Cd.LoadStylesheetEnd),n&&clearTimeout(n),i())})))})),e.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(Cd.LoadStylesheetStart),n=setTimeout((()=>{r.matches("playing")&&this.play(this.getCurrentTime()),n=-1,i()}),this.config.loadTimeout))}}preloadAllImages(){return Qd(this,void 0,void 0,(function*(){this.service.state;const e=()=>{this.service.state};this.emitter.on(Cd.Start,e),this.emitter.on(Cd.Pause,e);const t=[];for(const e of this.service.state.context.events)if(e.type===fd.IncrementalSnapshot&&e.data.source===gd.CanvasMutation){t.push(this.deserializeAndPreloadCanvasEvents(e.data,e));("commands"in e.data?e.data.commands:[e.data]).forEach((t=>{this.preloadImages(t,e)}))}return Promise.all(t)}))}preloadImages(e,t){if("drawImage"===e.property&&"string"==typeof e.args[0]&&!this.imageMap.has(t)){const t=document.createElement("canvas"),n=t.getContext("2d"),r=null==n?void 0:n.createImageData(t.width,t.height);null==r||r.data,JSON.parse(e.args[0]),null==n||n.putImageData(r,0,0)}}deserializeAndPreloadCanvasEvents(e,t){return Qd(this,void 0,void 0,(function*(){if(!this.canvasEventMap.has(t)){const n={isUnchanged:!0};if("commands"in e){const r=yield Promise.all(e.commands.map((e=>Qd(this,void 0,void 0,(function*(){const t=yield Promise.all(e.args.map(Wp(this.imageMap,null,n)));return Object.assign(Object.assign({},e),{args:t})})))));!1===n.isUnchanged&&this.canvasEventMap.set(t,Object.assign(Object.assign({},e),{commands:r}))}else{const r=yield Promise.all(e.args.map(Wp(this.imageMap,null,n)));!1===n.isUnchanged&&this.canvasEventMap.set(t,Object.assign(Object.assign({},e),{args:r}))}}}))}applyIncremental(e,t){var n,r,o;const{data:i}=e;switch(i.source){case gd.Mutation:try{this.applyMutation(i,t)}catch(e){this.warn(`Exception in mutation ${e.message||e}`,i)}break;case gd.Drag:case gd.TouchMove:case gd.MouseMove:if(t){const e=i.positions[i.positions.length-1];this.mousePos={x:e.x,y:e.y,id:e.id,debugData:i}}else i.positions.forEach((n=>{const r={doAction:()=>{this.moveAndHover(n.x,n.y,n.id,t,i)},delay:n.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(r)})),this.timer.addAction({doAction(){},delay:e.delay-(null===(n=i.positions[0])||void 0===n?void 0:n.timeOffset)});break;case gd.MouseInteraction:{if(-1===i.id)break;const e=new Event(el(vd[i.type])),n=this.mirror.getNode(i.id);if(!n)return this.debugNodeNotFound(i,i.id);this.emitter.emit(Cd.MouseInteraction,{type:i.type,target:n});const{triggerFocus:r}=this.config;switch(i.type){case vd.Blur:"blur"in n&&n.blur();break;case vd.Focus:r&&n.focus&&n.focus({preventScroll:!0});break;case vd.Click:case vd.TouchStart:case vd.TouchEnd:case vd.MouseDown:case vd.MouseUp:t?(i.type===vd.TouchStart?this.touchActive=!0:i.type===vd.TouchEnd&&(this.touchActive=!1),i.type===vd.MouseDown?this.lastMouseDownEvent=[n,e]:i.type===vd.MouseUp&&(this.lastMouseDownEvent=null),this.mousePos={x:i.x,y:i.y,id:i.id,debugData:i}):(i.type===vd.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(i.x,i.y,i.id,t,i),i.type===vd.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):i.type===vd.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):i.type===vd.TouchEnd?this.mouse.classList.remove("touch-active"):n.dispatchEvent(e));break;case vd.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:n.dispatchEvent(e)}break}case gd.Scroll:if(-1===i.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(i.id);if(!e)return this.debugNodeNotFound(i,i.id);e.scrollData=i;break}this.applyScroll(i,t);break;case gd.ViewportResize:this.emitter.emit(Cd.Resize,{width:i.width,height:i.height});break;case gd.Input:if(-1===i.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(i.id);if(!e)return this.debugNodeNotFound(i,i.id);e.inputData=i;break}this.applyInput(i);break;case gd.MediaInteraction:{const e=this.usingVirtualDom?this.virtualDom.mirror.getNode(i.id):this.mirror.getNode(i.id);if(!e)return this.debugNodeNotFound(i,i.id);const t=e;try{void 0!==i.currentTime&&(t.currentTime=i.currentTime),void 0!==i.volume&&(t.volume=i.volume),void 0!==i.muted&&(t.muted=i.muted),1===i.type&&t.pause(),0===i.type&&t.play(),4===i.type&&(t.playbackRate=i.playbackRate)}catch(e){this.warn(`Failed to replay media interactions: ${e.message||e}`)}break}case gd.StyleSheetRule:case gd.StyleDeclaration:this.usingVirtualDom?i.styleId?this.constructedStyleMutations.push(i):i.id&&(null===(r=this.virtualDom.mirror.getNode(i.id))||void 0===r||r.rules.push(i)):this.applyStyleSheetMutation(i);break;case gd.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const t=this.virtualDom.mirror.getNode(i.id);if(!t)return this.debugNodeNotFound(i,i.id);t.canvasMutations.push({event:e,mutation:i})}else{const t=this.mirror.getNode(i.id);if(!t)return this.debugNodeNotFound(i,i.id);jp({event:e,mutation:i,target:t,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break;case gd.Font:try{const e=new FontFace(i.family,i.buffer?new Uint8Array(JSON.parse(i.fontSource)):i.fontSource,i.descriptors);null===(o=this.iframe.contentDocument)||void 0===o||o.fonts.add(e)}catch(e){this.warn(e)}break;case gd.Selection:if(t){this.lastSelectionData=i;break}this.applySelection(i);break;case gd.AdoptedStyleSheet:this.usingVirtualDom?this.adoptedStyleSheets.push(i):this.applyAdoptedStyleSheet(i)}}applyMutation(e,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,lh(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const e in this.legacy_missingNodeRetryMap)try{const t=this.legacy_missingNodeRetryMap[e],n=ch(t.node,this.virtualDom,this.mirror);n&&(t.node=n)}catch(e){this.warn(e)}const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes=e.removes.filter((t=>!!n.getNode(t.id)||(this.warnNodeNotFound(e,t.id),!1))),e.removes.forEach((t=>{var r;const o=n.getNode(t.id);if(!o)return;let i=n.getNode(t.parentId);if(!i)return this.warnNodeNotFound(e,t.parentId);if(t.isShadow&&id(i)&&(i=i.shadowRoot),n.removeNodeFromMap(o),i)try{i.removeChild(o),this.usingVirtualDom&&"#text"===o.nodeName&&"STYLE"===i.nodeName&&(null===(r=i.rules)||void 0===r?void 0:r.length)>0&&(i.rules=[])}catch(t){if(!(t instanceof DOMException))throw t;this.warn("parent could not remove child in mutation",i,o,e)}}));const r=Object.assign({},this.legacy_missingNodeRetryMap),o=[],i=e=>{var t,i;if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");let a=n.getNode(e.parentId);if(!a)return e.node.type===Yc.Document?this.newDocumentQueue.push(e):o.push(e);e.node.isShadow&&(id(a)||a.attachShadow({mode:"open"}),a=a.shadowRoot);let s=null,c=null;if(e.previousId&&(s=n.getNode(e.previousId)),e.nextId&&(c=n.getNode(e.nextId)),(e=>{let t=null;return e.nextId&&(t=n.getNode(e.nextId)),null!==e.nextId&&void 0!==e.nextId&&-1!==e.nextId&&!t})(e))return o.push(e);if(e.node.rootId&&!n.getNode(e.node.rootId))return;const l=e.node.rootId?n.getNode(e.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(nd(a,n))return void this.attachDocumentToIframe(e,a);const d=(e,t)=>{if(!this.usingVirtualDom)for(const n of this.config.plugins||[])n.onBuild&&n.onBuild(e,{id:t,replayer:this})},u=Fl(e.node,{doc:l,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:d});if(-1===e.previousId||-1===e.nextId)return void(r[e.node.id]={node:u,mutation:e});const h=n.getMeta(a);if(h&&h.type===Yc.Element&&"textarea"===h.tagName&&e.node.type===Yc.Text){const e=Array.isArray(a.childNodes)?a.childNodes:Array.from(a.childNodes);for(const t of e)t.nodeType===a.TEXT_NODE&&a.removeChild(t)}else if((null==h?void 0:h.type)===Yc.Document){const n=a;e.node.type===Yc.DocumentType&&(null===(t=n.childNodes[0])||void 0===t?void 0:t.nodeType)===Node.DOCUMENT_TYPE_NODE&&n.removeChild(n.childNodes[0]),"HTML"===u.nodeName&&n.documentElement&&n.removeChild(n.documentElement)}if(s&&s.nextSibling&&s.nextSibling.parentNode?a.insertBefore(u,s.nextSibling):c&&c.parentNode?a.contains(c)?a.insertBefore(u,c):a.insertBefore(u,null):a.appendChild(u),d(u,e.node.id),this.usingVirtualDom&&"#text"===u.nodeName&&"STYLE"===a.nodeName&&(null===(i=a.rules)||void 0===i?void 0:i.length)>0&&(a.rules=[]),nd(u,this.mirror)){const e=this.mirror.getId(u),t=this.newDocumentQueue.find((t=>t.parentId===e));t&&(this.attachDocumentToIframe(t,u),this.newDocumentQueue=this.newDocumentQueue.filter((e=>e!==t)))}(e.previousId||e.nextId)&&this.legacy_resolveMissingNode(r,a,u,e)};e.adds.forEach((e=>{i(e)}));const a=Date.now();for(;o.length;){const e=ed(o);if(o.length=0,Date.now()-a>500){this.warn("Timeout in the loop, please check the resolve tree data:",e);break}for(const t of e){n.getNode(t.value.parentId)?td(t,(e=>{i(e)})):this.debug("Drop resolve tree since there is no parent for the root node.",t)}}Object.keys(r).length&&Object.assign(this.legacy_missingNodeRetryMap,r),cd(e.texts).forEach((t=>{var r;const o=n.getNode(t.id);if(!o){if(e.removes.find((e=>e.id===t.id)))return;return this.warnNodeNotFound(e,t.id)}if(o.textContent=t.value,this.usingVirtualDom){const e=o.parentNode;(null===(r=null==e?void 0:e.rules)||void 0===r?void 0:r.length)>0&&(e.rules=[])}})),e.attributes.forEach((t=>{const r=n.getNode(t.id);if(!r){if(e.removes.find((e=>e.id===t.id)))return;return this.warnNodeNotFound(e,t.id)}for(const e in t.attributes)if("string"==typeof e){const o=t.attributes[e];if(null===o)r.removeAttribute(e);else if("string"==typeof o)try{if("_cssText"===e&&("LINK"===r.nodeName||"STYLE"===r.nodeName))try{const e=n.getMeta(r);Object.assign(e.attributes,t.attributes);const o=Fl(e,{doc:r.ownerDocument,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache}),i=r.nextSibling,a=r.parentNode;if(o&&a){a.removeChild(r),a.insertBefore(o,i),n.replace(t.id,o);break}}catch(e){}r.setAttribute(e,o)}catch(e){this.warn("An error occurred may due to the checkout feature.",e)}else if("style"===e){const e=o,t=r;for(const n in e)if(!1===e[n])t.style.removeProperty(n);else if(e[n]instanceof Array){const r=e[n];t.style.setProperty(n,r[0],r[1])}else{const r=e[n];t.style.setProperty(n,r)}}}}))}applyScroll(e,t){var n,r;const o=this.mirror.getNode(e.id);if(!o)return this.debugNodeNotFound(e,e.id);const i=this.mirror.getMeta(o);if(o===this.iframe.contentDocument)null===(n=this.iframe.contentWindow)||void 0===n||n.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if((null==i?void 0:i.type)===Yc.Document)null===(r=o.defaultView)||void 0===r||r.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{o.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}catch(e){}}applyInput(e){const t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch(e){}}applySelection(e){try{const t=new Set,n=e.ranges.map((({start:e,startOffset:n,end:r,endOffset:o})=>{const i=this.mirror.getNode(e),a=this.mirror.getNode(r);if(!i||!a)return;const s=new Range;s.setStart(i,n),s.setEnd(a,o);const c=i.ownerDocument,l=null==c?void 0:c.getSelection();return l&&t.add(l),{range:s,selection:l}}));t.forEach((e=>e.removeAllRanges())),n.forEach((e=>{var t;return e&&(null===(t=e.selection)||void 0===t?void 0:t.addRange(e.range))}))}catch(e){}}applyStyleSheetMutation(e){var t;let n=null;e.styleId?n=this.styleMirror.getStyle(e.styleId):e.id&&(n=(null===(t=this.mirror.getNode(e.id))||void 0===t?void 0:t.sheet)||null),n&&(e.source===gd.StyleSheetRule?this.applyStyleSheetRule(e,n):e.source===gd.StyleDeclaration&&this.applyStyleDeclaration(e,n))}applyStyleSheetRule(e,t){var n,r,o,i;if(null===(n=e.adds)||void 0===n||n.forEach((({rule:e,index:n})=>{try{if(Array.isArray(n)){const{positions:r,index:o}=sd(n);ad(t.cssRules,r).insertRule(e,o)}else{const r=void 0===n?void 0:Math.min(n,t.cssRules.length);null==t||t.insertRule(e,r)}}catch(e){}})),null===(r=e.removes)||void 0===r||r.forEach((({index:e})=>{try{if(Array.isArray(e)){const{positions:n,index:r}=sd(e);ad(t.cssRules,n).deleteRule(r||0)}else null==t||t.deleteRule(e)}catch(e){}})),e.replace)try{null===(o=t.replace)||void 0===o||o.call(t,e.replace)}catch(e){}if(e.replaceSync)try{null===(i=t.replaceSync)||void 0===i||i.call(t,e.replaceSync)}catch(e){}}applyStyleDeclaration(e,t){if(e.set){ad(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority)}if(e.remove){ad(t.rules,e.index).style.removeProperty(e.remove.property)}}applyAdoptedStyleSheet(e){var t;const n=this.mirror.getNode(e.id);if(!n)return;null===(t=e.styles)||void 0===t||t.forEach((e=>{var t;let r=null,o=null;if(id(n)?o=(null===(t=n.ownerDocument)||void 0===t?void 0:t.defaultView)||null:"#document"===n.nodeName&&(o=n.defaultView),o)try{r=new o.CSSStyleSheet,this.styleMirror.add(r,e.styleId),this.applyStyleSheetRule({source:gd.StyleSheetRule,adds:e.rules},r)}catch(e){}}));let r=0;const o=(e,t)=>{const n=t.map((e=>this.styleMirror.getStyle(e))).filter((e=>null!==e));id(e)?e.shadowRoot.adoptedStyleSheets=n:"#document"===e.nodeName&&(e.adoptedStyleSheets=n),n.length!==t.length&&r<10&&(setTimeout((()=>o(e,t)),0+100*r),r++)};o(n,e.styleIds)}legacy_resolveMissingNode(e,t,n,r){const{previousId:o,nextId:i}=r,a=o&&e[o],s=i&&e[i];if(a){const{node:r,mutation:o}=a;t.insertBefore(r,n),delete e[o.node.id],delete this.legacy_missingNodeRetryMap[o.node.id],(o.previousId||o.nextId)&&this.legacy_resolveMissingNode(e,t,r,o)}if(s){const{node:r,mutation:o}=s;t.insertBefore(r,n.nextSibling),delete e[o.node.id],delete this.legacy_missingNodeRetryMap[o.node.id],(o.previousId||o.nextId)&&this.legacy_resolveMissingNode(e,t,r,o)}}moveAndHover(e,t,n,r,o){const i=this.mirror.getNode(n);if(!i)return this.debugNodeNotFound(o,n);const a=od(i,this.iframe),s=e*a.absoluteScale+a.x,c=t*a.absoluteScale+a.y;this.mouse.style.left=`${s}px`,this.mouse.style.top=`${c}px`,r||this.drawMouseTail({x:s,y:c}),this.hoverElements(i)}drawMouseTail(e){if(!this.mouseTail)return;const{lineCap:t,lineWidth:n,strokeStyle:r,duration:o}=!0===this.config.mouseTail?Hp:Object.assign({},Hp,this.config.mouseTail),i=()=>{if(!this.mouseTail)return;const e=this.mouseTail.getContext("2d");e&&this.tailPositions.length&&(e.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),e.beginPath(),e.lineWidth=n,e.lineCap=t,e.strokeStyle=r,e.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach((t=>e.lineTo(t.x,t.y))),e.stroke())};this.tailPositions.push(e),i(),setTimeout((()=>{this.tailPositions=this.tailPositions.filter((t=>t!==e)),i()}),o/this.speedService.state.context.timer.speed)}hoverElements(e){var t;null===(t=this.lastHoveredRootNode||this.iframe.contentDocument)||void 0===t||t.querySelectorAll(".\\:hover").forEach((e=>{e.classList.remove(":hover")})),this.lastHoveredRootNode=e.getRootNode();let n=e;for(;n;)n.classList&&n.classList.add(":hover"),n=n.parentElement}isUserInteraction(e){return e.type===fd.IncrementalSnapshot&&(e.data.source>gd.Mutation&&e.data.source<=gd.Input)}backToNormal(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(Cd.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug(`Node with id '${t}' not found. `,e)}warn(...e){this.config.showWarning&&this.config.logger.warn(Zp,...e)}debug(...e){this.config.showDebug&&this.config.logger.log(Zp,...e)}},ReplayerEvents:Cd,addCustomEvent:hh,freezePage:ph,getRecordConsolePlugin:e=>({name:fp,observer:mp,options:e}),getReplayConsolePlugin:e=>{const t=(null==e?void 0:e.replayLogger)||new yp(e).getConsoleLogger();return{handler(e,n,r){let o=null;if(e.type===fd.IncrementalSnapshot&&e.data.source===gd.Log?o=e.data:e.type===fd.Plugin&&e.data.plugin===fp&&(o=e.data.payload),o)try{"function"==typeof t[o.level]&&t[o.level](o)}catch(e){r.replayer.config.showWarning&&console.warn(e)}}}},get mirror(){return Wl},pack:e=>{const t=Object.assign(Object.assign({},e),{v:rp});return np($h(tp(JSON.stringify(t))),!0)},record:bu,unpack:e=>{if("string"!=typeof e)return e;try{const t=JSON.parse(e);if(t.timestamp)return t}catch(e){}try{const t=JSON.parse(np(ep(tp(e,!0))));if(t.v===rp)return t;throw new Error(`These events were packed with packer ${t.v} which is incompatible with current packer ${rp}.`)}catch(e){throw console.error(e),new Error("Unknown data format.")}},utils:md}),Jp=t(zp);const{supportsLocalStorageApi:Xp}=i,{clearMetric:Qp,checkMetric:qp,getMetric:$p,appendMetric:em,trackMetric:tm}=yn,nm=()=>({data:[],expireTime:0}),rm=e=>{Xp()?window.localStorage.removeItem(e):Qp(e)},om=(e,t=null)=>{if(!Xp())return $p(e,t);const n=JSON.parse(window.localStorage.getItem(e));return n?n.expireTime<=Date.now()?(rm(e),t):n.data:t};var im={clearBuffer:rm,checkBuffer:e=>Xp()?!!window.localStorage.getItem(e):qp(e),getBuffer:om,appendToBuffer:(e,t,n=0)=>{if(!Xp())return void em(e,t);const r=om(e,{data:[],expireTime:0});r.data.push(t),r.expireTime=Date.now()+n,window.localStorage.setItem(e,JSON.stringify(r))},getBufferSchema:nm,addToBuffer:(e,t,n=0)=>{if(!Xp())return void tm(e,t);const r=om(e,{data:[],expireTime:0});r.data=t,r.expireTime=Date.now()+n,window.localStorage.setItem(e,JSON.stringify(r))}};const{getMetric:am,clearMetric:sm,appendMetric:cm,checkMetric:lm}=yn,{sendWithFetch:dm}=Jt,{getUserId:um,getPath:hm}=Oc,{prepareDeviceType:pm}=ze,{endpoint:mm,PAYLOAD_SIZE:fm,MAX_MLDATA_WAITING_TIME:gm,MAX_CHUNKS_SIZE:vm,MAX_FLUSH_TIME:ym,CHUNKS_EXPIRATION_TIME:Im}=b,{SESSION_ID:Cm,REQUEST_ID:Sm,APP_NAME:Em,SCOPE_NAME:Tm,USER_AGENT:bm,DEVICE:wm,WEBVIEW:Am,CUSTOM_ATTRIBUTES:Nm,TRACEABILITY_ID:Mm,SESSION_REPLAY:Dm,SITE_ID:Om}=D,{objectOperator:Rm}=p,{addToBuffer:km,getBuffer:_m,clearBuffer:xm}=im,Lm={flushTime:ym,size:vm,limit:fm,maxAge:Im,isFirstRun:!0};let Fm=null;const Bm=()=>({session_id:am(Cm),view_id:am(Sm),app_name:am(Em),fury_context_name:am(Tm)}),Pm=["mla","mlb","mlm"],Um=()=>{const e=(am(Om)||"").toLowerCase();return Pm.some((t=>t===e))?e:"rola"},Wm=(e,t)=>{const n=Rm([{},e,{device_timestamp:Date.now(),user_id:um(),view_name:hm(),mime_type:"application/json",asset:t}]),r=am(Mm);r&&(n.traceability_id=r);const o=am(Nm);o&&(n.metadata=o);const i=pm({[bm]:am(bm)},{device:am(wm),webview:am(Am)});return i&&(n.device_platform=`/${i}`),{data:n}},Vm=(e,t=!0)=>{const n=am(e);return t&&(clearTimeout(Fm),sm(e)),n},Gm={hasReached:!1,ref:null},jm=()=>{if(Gm.hasReached)return!0;const e=void 0===window.melidata||window.melidata_namespace&&window.melidata_namespace.actual_track&&Object.keys(window.melidata_namespace.actual_track).length>0;return e&&Gm.ref&&clearTimeout(Gm.ref),!!e||(Gm.hasReached||Gm.ref||(Gm.ref=setTimeout((()=>{Gm.hasReached=!0}),gm)),!1)},Ym=e=>{if(!jm())return;const t=Bm(),n=Vm(e);if(!n||!t)return;const r=Wm(t,n);dm(`${mm(Um())}`,JSON.stringify(r),!1)},Zm=(e,t)=>{cm(e,t),(e=>{const t=am(e);(JSON.stringify(t).length>=Lm.limit||t.length>=Lm.size)&&Ym(e)})(e)},Hm=()=>{const{payload:e,url:t}=_m(Dm,{payload:null,url:null});e&&(xm(Dm),dm(`${t}`,JSON.stringify(e),!1))},Km=(e,t)=>{Lm.isFirstRun&&(Hm(),Lm.isFirstRun=!1),cm(e,t),(e=>{Fm=setTimeout((()=>{Ym(e)}),Lm.flushTime)})(e)};var zm={monitor:(e,t)=>{lm(e)?Zm(e,t):Km(e,t)},send:Ym,savePending:()=>{const e=Bm(),t=Vm(Dm);if(!t||!e)return;const n=Wm(e,t),r=mm(Um());km(Dm,{payload:n,url:r},Lm.maxAge)},sendPending:Hm};const{SESSION_REPLAY:Jm}=l,Xm=M,{WINDOW_DOM:Qm,WINDOW_WIDTH:qm,WINDOW_HEIGHT:$m,RAM_SIZE:ef,CPU_CORES:tf,USER_AGENT:nf,DARK_MODE:rf,REDUCED_MOTION:of,REDUCED_COLOR:af,APP_NAME:sf,SCOPE_NAME:cf,DEVICE:lf,PLATFORM_ID:df,SITE_ID:uf,WEBVIEW:hf,REQUEST_ID:pf,VIEW_NAME:mf}=D,ff=[Qm,qm,$m,ef,tf,nf,rf,of,af,URL,sf,cf,lf,df,uf,hf,pf,mf];var gf=(e,t)=>{const n=Xm(t,ff);if(!Object.keys(n).length)throw new Error("Metrics not found");return{name:Jm,data:n}};const vf=Jp,{SESSION_REPLAY:yf,CUSTOM_ATTRIBUTES:If,SESSION_REPLAY_START:Cf,SESSION_REPLAY_STOP:Sf,TRACEABILITY_ID:Ef}=D,{RRWEB_EVENT_TYPES:Tf}=b,{monitor:bf}=zm,wf=gf,{getMetricsCollected:Af,trackMetric:Nf}=yn,{objectOperator:Mf}=p,{subscribe:Df}=c;let Of=null;const Rf=(e={},t=null)=>{t&&Nf(Ef,t),Object.keys(e).length&&Nf(If,e),Of=vf.record({emit:e=>{if(e.type===Tf.Meta){const t=wf(null,Af());e.data=Mf([{},t.data,e.data])}bf(yf,e)},inlineStylesheet:!0,maskTextClass:/(ml-mask|rr-mask|nav-header-username|user-badge-title|payment-card-component)/,blockClass:/(ml-block|rr-block)/,maskInputOptions:{date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}})},kf=()=>Of&&Of();var _f=()=>{Df(Cf,((e={})=>{Rf(e.metadata||{},e.traceability_id||null)})),Df(Sf,(()=>{kf()})),window.startRecording=(e={},t=null)=>Rf(e,t),window.stopRecording=()=>kf()};var xf=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));const{trackMetric:Lf}=yn,{SESSION_ID:Ff,MLDATA_SESSION_ID:Bf}=D,{getCookie:Pf,setCookie:Uf}=wc,Wf=xf;var Vf=()=>{const e=Pf(Bf);if(!e){const e=Wf();return Uf(Bf,e,{"max-age":18e5}),void Lf(Ff,e)}Lf(Ff,e)};const{savePending:Gf,sendPending:jf}=zm,Yf=window.requestIdleCallback||(e=>setTimeout(e,200)),Zf="sessionReplayEvent",Hf=()=>{window.document.addEventListener(Zf,(async()=>{"hidden"===window.document.visibilityState&&Gf(),"visible"===window.document.visibilityState&&jf()})),window.document.addEventListener("visibilitychange",(()=>{const e=new window.Event(Zf);window.document.dispatchEvent(e)}))};var Kf=()=>{Yf((()=>Hf()))};const zf=En,Jf=Mn,{prepareConfiguration:Xf}=Pe,Qf=qo,qf=Zc,$f=_f,eg=Vf,tg=Kf,{supportsBeaconOrFetch:ng}=i;var rg={start:e=>{const t=Xf(e);if(t)try{ng()&&(zf(),Jf(),Qf(),eg(),qf(t),$f(),tg())}catch(e){}}};const{WEB_VITALS:og,RESOURCE_TIMING:ig,CLIENT_COOKIES:ag,PAGE_RENDER:sg,A11Y:cg,AVAILABILITY:lg,CDN_HEALTH:dg,TRAFFIC_HEALTH:ug,SESSION_REPLAY:hg}=l,pg=pi,mg=_i,fg=$i,gg=ga,vg=is,yg=Us,Ig=yc,Cg=bc,Sg=rg;var Eg={[og]:pg,[ig]:mg,[ag]:fg,[sg]:gg,[cg]:vg,[lg]:yg,[dg]:Ig,[ug]:Cg,[hg]:Sg};const{supportsEnvironment:Tg}=i,{queue:bg}=c,{agentKey:wg}={agentKey:"_perfill"},Ag=Eg,Ng={},Mg=()=>(Ng.initiatives||[]).forEach((e=>{e&&e.id&&Ag[e.id]&&Ag[e.id].start(Ng,e)})),Dg=()=>{window.requestIdleCallback?window.requestIdleCallback(Mg,{timeout:2e3}):setTimeout(Mg,500)};let Og=!1;const Rg={set:(e,t)=>{Ng[e]=t},queue:bg,send:e=>{e in Rg&&Rg[e]()},start:()=>{!Og&&Tg()&&(Og=!0,"complete"===window.document.readyState?Dg():window.addEventListener("load",Dg))}},kg=e=>{try{const t=e[0],n=Rg[t];t&&n&&n.apply(null,[].slice.call(e,1))}catch(e){}};return e((()=>{const e=(window[wg]||{}).q||[];window[wg]=(...e)=>kg(e);try{e.forEach(kg)}catch(e){}})())}();
//# sourceMappingURL=perfill-agent.min.js.map
